import{r,q as P,j as e,a as n}from"./app-DecQ0f_S.js";import{H as h,N as z}from"./Nav-BWBa_EZw.js";import F from"./asignview-DTw0K1-S.js";import{G as M}from"./iconBase-DWhxbjqT.js";import"./index-BPKSu1J7.js";import"./index-c1-G4gL8.js";import"./choices.min-DQfvTG_5.js";import"./notyf.min-DLu_xjpT.js";function T(l){return M({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"},child:[]}]})(l)}const W=({user:l,employee:H,user_type:t,projs:d,projects:I,query:j,usrrr:a,projectsss:p,taskss:b,holidays:u,leave:f,notif:i,assin:N,emp:g,results:w,projecteach:v,totalHours:k,customerInfo:L,id:o})=>{var m;const[y,_]=r.useState(!1),[D,C]=r.useState([]),{props:E}=P(),[x,c]=r.useState(null);console.log("customerInfo",o);const A=s=>{c(x===s?null:s)};return r.useEffect(()=>{Array.isArray(t)?C(t):console.error("Expected user_type to be an array:",t)},[t]),e.jsx(r.Fragment,{children:((m=E.auth.user.roles[0])==null?void 0:m.name)!=="customer"?e.jsx(r.Fragment,{children:e.jsxs("div",{className:`${l&&l!=="customer"?"w-[85.2%]":"w-full"} h-full absolute right-0 overflow-hidden`,onClick:s=>_(!y),children:[e.jsx(h,{user:l,notif:i}),e.jsx(z,{user_type:t}),e.jsx("div",{className:"px-8 table-section rounded-b-md",children:e.jsx("div",{className:"w-full ",children:e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(n,{href:"projects",children:e.jsxs("div",{className:"w-[80%] grid place-items-center  shadow-md p-[2rem] bg-[#63D9CA] ",children:[e.jsx("h1",{className:"text-[1.5rem] text-white",children:a===1?e.jsx("p",{children:p}):e.jsx("p",{children:v})}),e.jsx("h1",{className:"text-white text-[1.2rem]",children:"Total Project"})]})}),e.jsx(n,{href:"project-task-assign",children:e.jsxs("div",{className:"w-[80%] grid place-items-center  shadow-md p-[2rem] bg-[#FAAE42]",children:[e.jsx("h1",{className:"",children:a===1?e.jsx("p",{className:"text-[1.5rem] text-white",children:b}):e.jsxs("p",{children:[" ",e.jsxs("span",{className:"text-[1rem] text-white",children:["Assigned hours-",w]})," ",e.jsxs("span",{className:"text-[1rem] text-white",children:["Worked hours-",k]})]})}),e.jsx("h1",{className:"text-white text-[1.2rem]",children:a===1?e.jsx("p",{children:"Total Task"}):""})]})}),e.jsx(n,{href:"holi-day",children:e.jsxs("div",{className:"w-[80%] grid place-items-center  shadow-md p-[2rem] bg-[#2DCE89] ",children:[e.jsx("h1",{className:"text-[1.5rem] text-white",children:u}),e.jsxs("h1",{className:"text-white text-[1.2rem]",children:["Holidays"," "]})]})}),e.jsxs("div",{className:"w-[80%] grid place-items-center shadow-lg p-4 bg-[#F5365C] text-white",children:[e.jsx("h1",{className:"text-[1.5rem] text-white",children:f}),e.jsx("h1",{className:"text-white text-[1.2rem]",children:"On Leave"})]})]})})}),e.jsxs("div",{className:"px-8 ",children:[D.includes("edit_task")?e.jsx(F,{assin:N,emp:g}):"",e.jsxs("div",{className:"py-7",children:[e.jsx("h1",{className:"underline py-5 ml-5 text-[1.2rem]",children:"Project Reports"}),e.jsxs("table",{className:"w-[98%] px-8 ml-5 ",children:[e.jsx("thead",{className:"w-full px-8",children:e.jsxs("tr",{className:"border p-2 text-left bg-[#465584] text-white",children:[a===1?e.jsx("th",{className:"p-2 text-left border",children:"Employee Name"}):"",e.jsx("th",{className:"p-2 text-left border",children:"Project Name"}),e.jsx("th",{className:"p-2 text-left border",children:"Start Date"}),e.jsx("th",{className:"p-2 text-left border",children:"End Date"}),e.jsx("th",{className:"p-2 text-left border",children:"Assign hours"}),e.jsx("th",{className:"p-2 text-left border",children:"Time Spent(hours)"})]})}),e.jsx("tbody",{children:j.map((s,S)=>e.jsxs("tr",{children:[a===1?e.jsx("td",{style:{color:s.time_number>8?"green":s.time_number<0?"red":"black",backgroundColor:s.time_number>8?"#e0f7e0":(s.time_number<0,"#f7e0e0")},className:"p-2 text-left border border-blue-400",children:s.name}):"",e.jsx("td",{style:{color:s.time_number>8?"green":s.time_number<0?"red":"black",backgroundColor:s.time_number>8?"#e0f7e0":(s.time_number<0,"#f7e0e0")},className:"p-2 text-left border border-blue-400",children:s.title}),e.jsx("td",{style:{color:s.time_number>8?"green":s.time_number<0?"red":"black",backgroundColor:s.time_number>8?"#e0f7e0":(s.time_number<0,"#f7e0e0")},className:"p-2 text-left border border-blue-400",children:s.task_name}),e.jsx("td",{style:{color:s.time_number>8?"green":s.time_number<0?"red":"black",backgroundColor:s.time_number>8?"#e0f7e0":(s.time_number<0,"#f7e0e0")},className:"p-2 text-left border border-blue-400",children:s.employee_hours}),e.jsx("td",{className:"p-2 text-left border border-blue-400",style:{color:s.time_number>8?"green":s.time_number<0?"red":"black",backgroundColor:s.time_number>8?"#e0f7e0":(s.time_number<0,"#f7e0e0")},children:s.total_time_number})]},S))})]})]})]})]})}):e.jsxs(r.Fragment,{children:[e.jsx(h,{user:l,notif:i}),e.jsx("div",{className:"table-section flex px-10",children:e.jsx("div",{className:"w-full",children:d&&d.map(s=>e.jsxs("div",{className:"w-1/3 p-3",children:[e.jsxs("div",{className:"p-3 block bg-white shadow-xl rounded space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center relative",children:[e.jsx("h1",{className:"text-lg font-semibold",children:s.task_name}),e.jsx("button",{type:"button",onClick:()=>A(s.id),className:"focus:outline-none",children:e.jsx(T,{size:18})})]}),e.jsxs("div",{children:[e.jsxs("p",{children:["Task Progress: ",s.status,"%"]}),e.jsxs("p",{children:["Start Date: ",new Date(s.sdate).toLocaleDateString()]}),e.jsxs("p",{children:["End Date: ",new Date(s.edate).toLocaleDateString()]})]})]}),x===s.id&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex",children:[e.jsxs("div",{className:"bg-white w-80 p-5 shadow-lg z-50 h-full",children:[e.jsx("h1",{className:"text-lg font-semibold",children:s.task_name}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("a",{href:"/view-project",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("span",{className:"text-xl",children:"📊"}),e.jsx("span",{children:"View Projects"})]}),e.jsxs("a",{href:"/payment-data",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("span",{className:"text-xl",children:"💳"}),e.jsx("span",{children:"Payment Data"})]}),e.jsxs("a",{href:`/upload-documents/${o}`,className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("span",{className:"text-xl",children:"📁"}),e.jsx("span",{children:"Upload Document"})]})]}),e.jsx("button",{className:"mt-6 bg-red-500 text-white px-4 py-2 rounded",onClick:()=>c(null),children:"Close"})]}),e.jsx("div",{className:"flex-1",onClick:()=>c(null)})]})]},s.id))})})]})})};export{W as default};
