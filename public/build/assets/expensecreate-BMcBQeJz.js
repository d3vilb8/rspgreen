import{W as g,r as f,j as e}from"./app-OWEBvdtC.js";import{H as j,N as y}from"./Nav-CmIRCLvo.js";import"./iconBase-hI8KM4xB.js";import"./index-CGRCqaVb.js";import"./index-BSTxKt_a.js";function I({initialData:s={},customers:N}){const{data:a,setData:o,post:m,put:v,errors:r,reset:c}=g({status:s.status||"",date:s.date||new Date().toISOString().split("T")[0],main_label:s.main_label||"",income_entries:s.income_entries||[{amount:"",label:""}]});f.useEffect(()=>{console.log("initialData:",s),s&&Object.keys(s).length>0&&o({status:s.status||"",date:s.date||new Date().toISOString().split("T")[0],main_label:s.main_label||"",income_entries:s.income_entries||[{amount:"",label:""}]})},[s]);const x=()=>{o("income_entries",[...a.income_entries,{amount:"",label:""}])},b=n=>{const t=[...a.income_entries];t.splice(n,1),o("income_entries",t)},i=(n,t)=>{const{name:d,value:p}=t.target,u=[...a.income_entries];u[n][d]=p,o("income_entries",u)},l=n=>{o(n.target.name,n.target.value)},h=n=>{n.preventDefault();const t={...a,income_entries:JSON.stringify(a.income_entries)};s.id?m(`/amc-expense-update/${s.id}`,{data:t,onSuccess:()=>{alert("Income entry updated successfully!"),c()},onError:()=>{alert("Failed to update income entry.")}}):m("/amc-expense-create",{data:t,onSuccess:()=>{alert("Income entry created successfully!"),c()},onError:()=>{alert("Failed to create income entry.")}})};return e.jsxs("div",{className:"w-[83.2%] absolute right-0 overflow-hidden",children:[e.jsx(j,{}),e.jsx(y,{}),e.jsxs("div",{className:"p-6 mx-auto bg-white rounded-md shadow-md ",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-700",children:s.id?"Edit Expense Entry":"Create Expense Entry"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"status",value:a.status,onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"--Select Status--"}),e.jsx("option",{value:"0",children:"Paid"}),e.jsx("option",{value:"1",children:"Unpaid"})]}),r.status&&e.jsx("span",{className:"text-sm text-red-500",children:r.status})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"date",value:a.date,onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),r.date&&e.jsx("span",{className:"text-sm text-red-500",children:r.date})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:["Main Label ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"main_label",value:a.main_label,onChange:l,className:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),r.main_label&&e.jsx("span",{className:"text-sm text-red-500",children:r.main_label})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"mb-2 text-sm font-semibold text-gray-700",children:"Income Entries"}),a.income_entries.map((n,t)=>e.jsxs("div",{className:"flex items-center mb-2 space-x-2",children:[e.jsx("input",{type:"number",name:"amount",placeholder:"Income Amount",value:n.amount,onChange:d=>i(t,d),className:"flex-1 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx("input",{type:"text",name:"label",placeholder:"Income Entry Label",value:n.label,onChange:d=>i(t,d),className:"flex-1 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx("button",{type:"button",onClick:()=>b(t),className:"px-3 py-2 text-sm text-white bg-red-500 rounded-md hover:bg-red-600",children:"Delete"})]},t)),e.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 text-sm text-white bg-blue-500 rounded-md hover:bg-blue-600",children:"Add More Field"})]}),e.jsx("button",{type:"submit",className:"w-[10rem] py-2 text-sm font-semibold text-white bg-green-500 rounded-md hover:bg-green-600",children:s.id?"Update Income Entry":"Create Income Entry"})]})]})]})}export{I as default};
