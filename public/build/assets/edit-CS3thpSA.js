import{r as h,W as H,j as e,a as R}from"./app-OWEBvdtC.js";import{H as G,N as J,b as T}from"./Nav-CmIRCLvo.js";import{N as U}from"./notyf.min-DLu_xjpT.js";import{M as _}from"./Modal-Di6ygOb6.js";import{a as b}from"./index-CGRCqaVb.js";import"./iconBase-hI8KM4xB.js";import"./index-BSTxKt_a.js";import"./transition-CLzje324.js";const c=new U,ee=({employee:a,user:w,user_type:C,roles:F,employeeRole:D,branches:k,department:S,designation:E})=>{const[B,g]=h.useState(!1),[A,f]=h.useState(!1),[q,v]=h.useState(!1),{data:n,setData:N,post:u,errors:t,notif:p}=H({name:a.name||"",email:a.email||"",password:"",phone:a.phone||"",address:a.address||"",dob:a.dob||"",gender:a.gender||"",joinning_date:a.joinning_date||"",branch_id:a.branch_id||"",department_id:a.department_id||"",designation_id:a.designation_id||"",company_doj:a.company_doj||"",account_holder_name:a.account_holder_name||"",account_number:a.account_number||"",bank_name:a.bank_name||"",bank_identifier_code:a.bank_identifier_code||"",branch_location:a.branch_location||"",tax_payer_id:a.tax_payer_id||"",roleemployee:a.roleemployee||D||"",net_salary:a.net_salary||"",basic_salary:a.basic_salary||"",ifsc_code:a.ifsc_code||"",apc_no:a.apc_no||"",ptax_no:a.ptax_no||"",pf_no:a.pf_no||"",esi_no:a.esi_no||"",pan_no:a.pan_no||"",aadhar_no:a.aadhar_no||"",documents:a.documents||[{name:"",type:"",file:null}],d_name:a.d_name||"",b_name:a.b_name||"",ds_name:a.ds_name||"",cv:a.cv||"",can_cheque:a.can_cheque||"",declaration:a.declaration||""});h.useState({history:[{company_name:"",department:"",role:""}],additional_information:"",employee_name:"",document_type:"",document_upload:null,basic_salary:"",gross_salary:""});const M=a.documents||"[]";let x=[];try{x=JSON.parse(M)}catch(l){console.error("Error parsing documents:",l),x=[]}const[y,L]=h.useState({documents:Array.isArray(x)?x:[{name:"",type:"",file:null}]});console.log("Document",y.documents),console.log(y);const s=l=>{N(l.target.name,l.target.value)},m=()=>{g(!1),f(!1),v(!1),setSelectedBranchId(null),reset("d_name")},I=l=>{l.preventDefault(),u("/departments",{onSuccess:()=>{c.success("Department created successfully"),reset(),m()},onError:d=>{d&&typeof d=="object"?Object.entries(d).forEach(([i,r])=>{Array.isArray(r)?r.forEach(o=>c.error(o)):c.error(r)}):c.error("An unexpected error occurred.")}})},j=l=>{const{name:d,files:i}=l.target;N(d,i[0])},O=l=>{l.preventDefault(),u("/branches",{onSuccess:()=>{c.success("Branch created successfully!"),fetchBranches(),m()},onError:()=>{c.error("An error occurred while creating the branch.")}})},P=l=>{l.preventDefault(),u("/designations",{onSuccess:()=>{c.success("Branch created successfully!"),fetchBranches(),m()},onError:()=>{c.error("An error occurred while creating the branch.")}})},$=l=>{l.preventDefault();const d=new FormData;Object.keys(n).forEach(i=>{i==="documents"&&Array.isArray(n.documents)?n.documents.forEach((r,o)=>{r.file&&(d.append(`documents[${o}][name]`,r.name),d.append(`documents[${o}][type]`,r.type),d.append(`documents[${o}][file]`,r.file))}):d.append(i,n[i])}),u(`/employees-update/${a.id}`,{data:d,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{p.success("Employee updated successfully")},onError:i=>{Object.entries(i||{}).forEach(([r,o])=>{p.error(`${r}: ${o}`)})}})};return e.jsxs("div",{className:"w-[85.2%] ml-[11.5rem] absolute right-0",children:[e.jsx(G,{user:w,notif:p}),e.jsx(J,{user_type:C}),e.jsxs("div",{className:"p-3 table-section",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"grid p-2 mt-2 text-white bg-blue-800 rounded-lg place-items-center",children:e.jsx(R,{href:"employees",children:e.jsx(T,{className:"text-[1rem]"})})})})}),e.jsxs("form",{onSubmit:$,className:"px-[8rem] grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-2",children:e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Personal Details"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{id:"name",className:"w-full rounded-lg",name:"name",type:"text",value:n.name,onChange:s,required:!0}),t.name&&e.jsx("div",{children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{id:"email",className:"w-full rounded-lg",name:"email",type:"email",value:n.email,onChange:s,required:!0}),t.email&&e.jsx("div",{children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{id:"password",className:"w-full rounded-lg",name:"password",type:"password",value:n.password,onChange:s,required:!0}),t.password&&e.jsx("div",{children:t.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",children:"Phone"}),e.jsx("input",{id:"phone",className:"w-full rounded-lg",name:"phone",type:"text",value:n.phone,onChange:s,required:!0}),t.phone&&e.jsx("div",{children:t.phone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",children:"Address"}),e.jsx("input",{id:"address",className:"w-full rounded-lg",name:"address",type:"text",value:n.address,onChange:s,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dob",children:"Date of Birth"}),e.jsx("input",{id:"dob",className:"w-full rounded-lg",name:"dob",type:"date",value:n.dob,onChange:s,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gender",children:"Gender"}),e.jsxs("select",{id:"gender",className:"w-full rounded-lg",name:"gender",value:n.gender,onChange:s,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"joinning_date",children:"Joining Date"}),e.jsx("input",{id:"joinning_date",className:"w-full rounded-lg",name:"joinning_date",type:"date",value:n.joinning_date,onChange:s,required:!0})]}),e.jsx("div",{className:"col-span-2 mt-4",children:e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Company Details"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"branch_id",children:"Branch ID"}),e.jsxs("select",{id:"branch_id",className:"w-full rounded-lg",name:"branch_id",value:n.branch_id,onChange:s,children:[e.jsx("option",{value:"",children:"Select Branch"}),k.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),e.jsx("div",{className:"grid place-items-center mt-5",children:e.jsx("a",{onClick:()=>f(!0),className:" rounded bg-blue-950 text-white p-2 h-[2rem]",children:e.jsx(b,{})})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"department_id",children:"Department ID"}),e.jsxs("select",{id:"branch_id",className:"w-full rounded-lg",name:"department_id",value:n.department_id,onChange:s,children:[e.jsx("option",{value:"",children:"Select Department"}),S.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),e.jsx("div",{className:"grid place-items-center mt-5",children:e.jsx("a",{onClick:()=>g(!0),className:" rounded bg-blue-950 text-white p-2 h-[2rem]",children:e.jsx(b,{})})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"designation_id",children:"Designation ID"}),e.jsxs("select",{id:"designation_id",className:"w-full rounded-lg",name:"designation_id",value:n.designation_id,onChange:s,children:[e.jsx("option",{value:"",children:"Select Designation"}),E.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),e.jsx("div",{className:"grid place-items-center mt-5",children:e.jsx("a",{onClick:()=>v(!0),className:" rounded bg-blue-950 text-white p-2 h-[2rem]",children:e.jsx(b,{})})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company_doj",children:"Company Date of Joining"}),e.jsx("input",{id:"company_doj",className:"w-full rounded-lg",name:"company_doj",type:"date",value:n.company_doj,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"roleemployee",children:"Role"}),e.jsxs("select",{id:"roleemployee",className:"w-full rounded-lg",name:"roleemployee",value:n.roleemployee,onChange:s,children:[e.jsx("option",{value:"",children:"Select Role"}),F.map(l=>e.jsx("option",{value:l.name,children:l.name},l.id))]})]}),e.jsx("div",{className:"col-span-2 mt-4",children:e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Bank Details"})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"account_holder_name",children:"Account Holder Name"}),e.jsx("input",{id:"account_holder_name",className:"w-full rounded-lg",name:"account_holder_name",type:"text",value:n.account_holder_name,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"account_number",children:"Account Number"}),e.jsx("input",{id:"account_number",className:"w-full rounded-lg",name:"account_number",type:"text",value:n.account_number,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bank_name",children:"Bank Name"}),e.jsx("input",{id:"bank_name",className:"w-full rounded-lg",name:"bank_name",type:"text",value:n.bank_name,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bank_identifier_code",children:"Bank Identifier Code"}),e.jsx("input",{id:"bank_identifier_code",className:"w-full rounded-lg",name:"bank_identifier_code",type:"text",value:n.bank_identifier_code,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"branch_location",children:"Branch Location"}),e.jsx("input",{id:"branch_location",className:"w-full rounded-lg",name:"branch_location",type:"text",value:n.branch_location,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tax_payer_id",children:"Basic salary *"}),e.jsx("input",{id:"tax_payer_id",className:"w-full rounded-lg",name:"basic_salary",type:"text",value:n.basic_salary,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tax_payer_id",children:"Gross salary *"}),e.jsx("input",{id:"tax_payer_id",className:"w-full rounded-lg",name:"net_salary",type:"text",value:n.net_salary,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apc_no",children:"APC No"}),e.jsx("input",{id:"apc_no",className:"w-full rounded-lg",name:"apc_no",type:"text",value:n.apc_no,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bank_name",children:"IFSC Code"}),e.jsx("input",{id:"ifsc_code",className:"w-full rounded-lg",name:"ifsc_code",type:"text",value:n.ifsc_code,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bank_name",children:"PTAX NO"}),e.jsx("input",{id:"ptax_no",className:"w-full rounded-lg",name:"ptax_no",type:"text",value:n.ptax_no,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bank_name",children:"PF NO"}),e.jsx("input",{id:"pf_no",className:"w-full rounded-lg",name:"pf_no",type:"text",value:n.pf_no,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"esi_no",children:"ESI NO"}),e.jsx("input",{id:"esi_no",className:"w-full rounded-lg",name:"esi_no",type:"text",value:n.esi_no,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pan_no",children:"Pan NO"}),e.jsx("input",{id:"pan_no",className:"w-full rounded-lg",name:"pan_no",type:"text",value:n.pan_no,onChange:s})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"aadhar_no",children:"AAdhar NO"}),e.jsx("input",{id:"aadhar_no",className:"w-full rounded-lg",name:"aadhar_no",type:"text",value:n.aadhar_no,onChange:s})]}),e.jsx("div",{className:"col-span-2 mt-4",children:e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"History"})}),e.jsxs("div",{className:"col-span-2 mt-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Employes Documents"}),e.jsxs("div",{className:"grid grid-cols-3 gap-5",children:[e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("h1",{children:"CV Upload"}),e.jsx("input",{type:"file",onChange:j,name:"cv",id:"",className:"border p-2"}),e.jsx("img",{src:n.cv,alt:""})]}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("h1",{children:"Cancle Cheque Upload"}),e.jsx("input",{type:"file",onChange:j,name:"can_cheque",id:"",className:"border p-2"})]}),e.jsxs("div",{className:"",children:[e.jsx("h1",{children:"Declaration"}),e.jsx("input",{type:"file",onChange:j,name:"declaration",id:"",className:"border p-2"})]})]})]}),e.jsx("button",{type:"submit",className:"bg-blue-600 p-2 rounded-md text-white w-[30%] col-span-2",children:"Create"})]})]}),e.jsxs(_,{show:B,onClose:m,children:[e.jsx("h2",{className:"text-lg font-bold p-4",children:"Create Department"}),e.jsxs("form",{onSubmit:I,className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Department Name"}),e.jsx("input",{type:"text",id:"d_name",name:"d_name",value:n.d_name,onChange:s,className:"w-full p-3 border rounded",placeholder:"Enter department name"}),t.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.name})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Create"})})]})]}),e.jsxs(_,{show:A,onClose:m,children:[e.jsx("h2",{className:"text-lg font-bold p-4",children:"Create Branch"}),e.jsxs("form",{onSubmit:O,className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Branch Name"}),e.jsx("input",{type:"text",id:"b_name",name:"b_name",value:n.b_name,onChange:s,className:"w-full p-3 border rounded",placeholder:"Enter department name"}),t.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.name})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Create"})})]})]}),e.jsxs(_,{show:q,onClose:m,children:[e.jsx("h2",{className:"text-lg font-bold p-4",children:"Create Branch"}),e.jsxs("form",{onSubmit:P,className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Designation Name"}),e.jsx("input",{type:"text",id:"ds_name",name:"ds_name",value:n.ds_name,onChange:s,className:"w-full p-3 border rounded",placeholder:"Enter department name"}),t.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.name})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Create"})})]})]})]})};export{ee as default};
