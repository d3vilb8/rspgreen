import{W as w,j as e}from"./app-OWEBvdtC.js";function D(){const{data:r,setData:n,post:x,errors:d}=w({customer_id:"",category_id:"",issue_date:"",items:[{id:1,item_name:"",quantity:1,price:0,discount:0,tax:0,amount:0}]}),h=()=>{n("items",[...r.items,{id:r.items.length+1,item_name:"",quantity:1,price:0,discount:0,tax:0,amount:0}])},i=(t,l,a)=>{const c=[...r.items];c[t][l]=a;const{quantity:o,price:s,discount:f,tax:v}=c[t],m=o*s,u=m*f/100,_=(m-u)*v/100;c[t].amount=m-u+_,n("items",c)},p=()=>{const t=r.items.reduce((o,s)=>o+s.quantity*s.price,0),l=r.items.reduce((o,s)=>o+s.quantity*s.price*s.discount/100,0),a=r.items.reduce((o,s)=>o+(s.quantity*s.price-s.quantity*s.price*s.discount/100)*s.tax/100,0),c=t-l+a;return{subtotal:t,totalDiscount:l,totalTax:a,totalAmount:c}},{subtotal:b,totalDiscount:g,totalTax:j,totalAmount:N}=p(),y=t=>{t.preventDefault(),x("/proposals/store")};return e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Proposal Create"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Dashboard > Proposal > Proposal Create"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md shadow mb-6 grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Customer"}),e.jsx("select",{value:r.customer_id,onChange:t=>n("customer_id",t.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",children:e.jsx("option",{value:"",children:"Select Customer"})}),d.customer_id&&e.jsx("span",{className:"text-red-500 text-sm",children:d.customer_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Issue Date"}),e.jsx("input",{type:"date",value:r.issue_date,onChange:t=>n("issue_date",t.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2"}),d.issue_date&&e.jsx("span",{className:"text-red-500 text-sm",children:d.issue_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsx("select",{value:r.category_id,onChange:t=>n("category_id",t.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",children:e.jsx("option",{value:"",children:"Select Category"})}),d.category_id&&e.jsx("span",{className:"text-red-500 text-sm",children:d.category_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Proposal Number"}),e.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md p-2",value:"#PROP0003",readOnly:!0})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md shadow mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Product & Services"}),e.jsxs("table",{className:"w-full border border-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"p-4 text-left",children:"Items"}),e.jsx("th",{className:"p-4 text-left",children:"Quantity"}),e.jsx("th",{className:"p-4 text-left",children:"Price"}),e.jsx("th",{className:"p-4 text-left",children:"Discount"}),e.jsx("th",{className:"p-4 text-left",children:"Tax (%)"}),e.jsx("th",{className:"p-4 text-left",children:"Amount"})]})}),e.jsx("tbody",{children:r.items.map((t,l)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"p-4",children:[e.jsx("input",{type:"text",value:t.item_name,onChange:a=>i(l,"item_name",a.target.value),className:"border border-gray-300 rounded-md p-2 w-full",placeholder:"Item Name"}),d[`items.${l}.item_name`]&&e.jsx("span",{className:"text-red-500 text-sm",children:d[`items.${l}.item_name`]})]}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"number",value:t.quantity,onChange:a=>i(l,"quantity",parseFloat(a.target.value)||0),className:"border border-gray-300 rounded-md p-2 w-full",placeholder:"Qty"})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"number",value:t.price,onChange:a=>i(l,"price",parseFloat(a.target.value)||0),className:"border border-gray-300 rounded-md p-2 w-full",placeholder:"Price"})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"number",value:t.discount,onChange:a=>i(l,"discount",parseFloat(a.target.value)||0),className:"border border-gray-300 rounded-md p-2 w-full",placeholder:"Discount"})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"number",value:t.tax,onChange:a=>i(l,"tax",parseFloat(a.target.value)||0),className:"border border-gray-300 rounded-md p-2 w-full",placeholder:"Tax"})}),e.jsx("td",{className:"p-4 text-right",children:t.amount.toFixed(2)})]},t.id))})]}),e.jsx("button",{type:"button",onClick:h,className:"mt-4 bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600",children:"+ Add Item"})]}),e.jsx("div",{className:"bg-white p-4 rounded-md shadow",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("p",{className:"text-right font-semibold",children:"Sub Total (₹)"}),e.jsx("p",{className:"text-right",children:b.toFixed(2)}),e.jsx("p",{className:"text-right font-semibold",children:"Discount (₹)"}),e.jsx("p",{className:"text-right",children:g.toFixed(2)}),e.jsx("p",{className:"text-right font-semibold",children:"Tax (₹)"}),e.jsx("p",{className:"text-right",children:j.toFixed(2)}),e.jsx("p",{className:"text-right font-bold",children:"Total Amount (₹)"}),e.jsx("p",{className:"text-right font-bold",children:N.toFixed(2)})]})}),e.jsx("button",{type:"submit",className:"mt-6 w-full bg-blue-600 text-white p-4 rounded-md hover:bg-blue-700",children:"Submit"})]})})}export{D as default};
