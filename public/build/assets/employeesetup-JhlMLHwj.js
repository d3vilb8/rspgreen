import{r as c,W as B,j as e}from"./app-OWEBvdtC.js";import v from"./sidebar-mDdbHRnq.js";import{H as C,N as E}from"./Nav-CmIRCLvo.js";import{M as _}from"./Modal-Di6ygOb6.js";import{N as M}from"./notyf.min-DLu_xjpT.js";import"./iconBase-hI8KM4xB.js";import"./index-CGRCqaVb.js";import"./index-BSTxKt_a.js";import"./transition-CLzje324.js";const R=({user:u,notif:x,user_type:b,branchesa:p})=>{const[j,l]=c.useState(!1),[t,o]=c.useState(null),s=new M,{data:f,setData:d,post:i,put:S,reset:N,errors:h}=B({b_name:""});c.useEffect(()=>{n()},[]);const n=async()=>{try{const r=await axios.get("/branches");setBranches(r.data)}catch(r){console.error("Error fetching branches:",r)}},m=(r=null)=>{l(!0),d("b_name",r?r.b_name:""),o(r?r.id:null)},a=()=>{l(!1),o(null),N("b_name")},y=r=>{r.preventDefault(),t?i(`/branches-update/${t}`,{onSuccess:()=>{s.success("Branch updated successfully!"),n(),a()},onError:()=>{s.error("An error occurred while updating the branch.")}}):i("/branches",{onSuccess:()=>{s.success("Branch created successfully!"),n(),a()},onError:()=>{s.error("An error occurred while creating the branch.")}})},g=async r=>{if(confirm("Are you sure you want to delete this branch?"))try{await axios.delete(`/branches/${r}`),s.success("Branch deleted successfully!"),window.location.reload()}catch(w){console.error("Error deleting branch:",w),s.error("Branch deleted successfully!"),window.location.reload()}};return e.jsxs("div",{className:"w-[85.2%] absolute right-0",children:[e.jsx(C,{user:u,notif:x}),e.jsx(E,{user_type:b}),e.jsxs("div",{className:"flex px-9",children:[e.jsx(v,{}),e.jsxs("div",{className:"flex-1 p-6 bg-gray-100",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"Manage Branch"}),e.jsx("button",{onClick:()=>m(),className:"p-2 text-teal-900 underline rounded-md",children:"Create Branch"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Branch Name"}),e.jsx("th",{className:"px-4 py-2 text-right border-b",children:"Action"})]})}),e.jsx("tbody",{className:"",children:p.map(r=>e.jsxs("tr",{className:"transition duration-200 hover:bg-gray-100",children:[e.jsx("td",{className:"px-4 py-2 border-b",children:r.name}),e.jsxs("td",{className:"px-4 py-2 text-right border-b",children:[e.jsx("button",{onClick:()=>m(r),className:"text-blue-600 underline hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>g(r.id),className:"ml-4 text-red-600 underline hover:text-red-800",children:"Delete"})]})]},r.id))})]})})]})]}),e.jsx(_,{show:j,onClose:a,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold",children:t?"Edit Branch":"Create New Branch"}),h.b_name&&e.jsx("p",{className:"text-red-600",children:h.b_name}),e.jsxs("form",{onSubmit:y,className:"mt-4",children:[e.jsxs("label",{className:"block mb-2",children:["Branch Name:",e.jsx("input",{type:"text",value:f.b_name,onChange:r=>d("b_name",r.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),e.jsx("button",{type:"submit",className:"p-2 mt-4 text-white bg-blue-600 rounded-md",children:t?"Update Branch":"Create Branch"}),e.jsx("button",{onClick:a,type:"button",className:"p-2 mt-2 text-white bg-red-600 rounded-md",children:"Close"})]})]})})]})};export{R as default};
