import{r as n,j as e,b as p}from"./app-DecQ0f_S.js";import{M as j}from"./Modal-BhgbF3q9.js";import{H as D,N as k}from"./Nav-BWBa_EZw.js";import{u as T}from"./index-DAUA1xsM.js";import{b as I}from"./index-BPKSu1J7.js";import{F as f,a as M}from"./index-c1-G4gL8.js";import{N as H}from"./notyf.min-DLu_xjpT.js";import"./transition-CWN7uk3v.js";import"./iconBase-DWhxbjqT.js";import"./index-gHrjMQXW.js";const i=new H,K=({user:y,notif:N,user_type:g,documents:O,employees:d,attendances:c})=>{const[b,m]=n.useState(!1),[v,r]=n.useState(!1),[x,_]=n.useState();n.useState(),n.useState();const{post:w,put:C,data:a,setData:l,processing:$,errors:L}=T({employee_id:"",date:"",in_time:"",out_time:""});console.log("jhgfgh");async function S(t){_(t),await p.get(`/attendances/${t}`).then(s=>{l({employee_id:s.data.employee_id,date:s.data.date,in_time:s.data.in_time,out_time:s.data.out_time})})}const o=t=>{const[s,h]=t.split(":"),u=new Date;return u.setHours(s,h),u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})};function A(t){t.preventDefault(),w(route("attendances.store"),{onSuccess(){i.success("Attandance Added")}})}function F(t){console.log(x),t.preventDefault(),C(`/attendances/${x}`,{onSuccess(){i.success("Attandance updated")}})}async function E(t){try{await p.delete(`/attendances/${t}`),i.success("Attendance deleted successfully.")}catch(s){console.error(s)}}return e.jsxs("div",{className:"w-[85.2%] ml-[11.5rem]",children:[e.jsx(D,{user:y,notif:N}),e.jsx(k,{user_type:g}),e.jsx(j,{show:b,maxWidth:"lg",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-lg",children:"Create Attendace"}),e.jsx("button",{onClick:()=>m(!1),children:e.jsx(f,{})})]}),e.jsx("hr",{}),e.jsx("div",{className:"py-4",children:e.jsxs("form",{onSubmit:A,className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Employee"}),e.jsxs("select",{name:"employee_id",onChange:t=>l("employee_id",t.target.value),value:a.employee_id,className:"form-select rounded text-sm",children:[e.jsx("option",{value:"",children:"-- Select Employee --"}),d.map((t,s)=>e.jsx("option",{value:t.id,children:t.name},s))]})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Attandance Date"}),e.jsx("input",{type:"date",name:"date",onChange:t=>l("date",t.target.value),value:a.date,className:"form-input rounded text-sm"})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"In Time"}),e.jsx("input",{type:"time",name:"in_time",onChange:t=>l("in_time",t.target.value),value:a.in_time,className:"form-input rounded text-sm"})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Out Time"}),e.jsx("input",{type:"time",name:"out_time",onChange:t=>l("out_time",t.target.value),value:a.out_time,className:"form-input rounded text-sm"})]}),e.jsx("div",{className:"flex justify-center text-sm gap-y-2",children:e.jsx("button",{type:"submit",className:"py-2 px-5 rounded bg-blue-500 text-white",children:"Submit"})})]})})]})}),e.jsxs("div",{className:"w-full px-9",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl px-9 ",children:"Manage Attendance"}),e.jsx("button",{onClick:t=>m(!0),className:"text-sm px-4 py-2 rounded text-white bg-blue-500",children:"Create Attendance"})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-4 rounded-l",children:"#"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Employee Name"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Employee Id"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Attandance Date"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Clock In"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Clock Out"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2 rounded-r",children:"Action"})]})}),e.jsx("tbody",{children:c&&c.map((t,s)=>e.jsx(n.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-4 text-sm",children:s+1}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:t.name}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:t.id}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:new Date(t.date).toLocaleDateString()}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:o(t.in_time)}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:o(t.out_time)}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:h=>{r(!0),S(t.id)},className:"px-2 py-2 bg-blue-500 rounded text-white",children:e.jsx(M,{})}),e.jsx("button",{onClick:()=>E(t.id),className:"px-2 py-2 bg-red-500 rounded text-white",children:e.jsx(I,{})})]})})]})},s))})]}),e.jsx(j,{show:v,maxWidth:"lg",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-lg",children:"Edit Attendace"}),e.jsx("button",{onClick:t=>r(!1),children:e.jsx(f,{})})]}),e.jsx("hr",{}),e.jsx("div",{className:"py-4",children:e.jsxs("form",{onSubmit:F,className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Employee"}),e.jsxs("select",{name:"employee_id",onChange:t=>l("employee_id",t.target.value),value:a.employee_id,className:"form-select rounded text-sm",children:[e.jsx("option",{value:"",children:"-- Select Employee --"}),d.map((t,s)=>e.jsx("option",{value:t.id,children:t.name},s))]})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Attandance Date"}),e.jsx("input",{type:"date",onChange:t=>l("date",t.target.value),value:a.date,className:"form-input rounded text-sm"})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"In Time"}),e.jsx("input",{type:"time",onChange:t=>l("in_time",t.target.value),value:a.in_time,className:"form-input rounded text-sm"})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Out Time"}),e.jsx("input",{type:"time",onChange:t=>l("out_time",t.target.value),value:a.out_time,className:"form-input rounded text-sm"})]}),e.jsx("div",{className:"flex justify-center text-sm gap-y-2",children:e.jsx("button",{type:"submit",className:"py-2 px-5 rounded bg-blue-500 text-white",children:"Update"})})]})})]})})]})]})]})};export{K as default};
