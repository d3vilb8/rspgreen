import{r as d,W as E,j as e}from"./app-OWEBvdtC.js";import{H,N as M}from"./Nav-CmIRCLvo.js";import{e as C}from"./index-CGRCqaVb.js";import{N as W}from"./notyf.min-DLu_xjpT.js";import"./iconBase-hI8KM4xB.js";import"./index-BSTxKt_a.js";const a=new W;function O({user:h,user_type:m,notif:p,empl:i,holidays:x,assignments:y}){const[j,c]=d.useState(!1),[l,f]=d.useState("create"),[b,N]=d.useState(null),{data:w,setData:n,post:g,put:v,delete:A,reset:u,errors:r}=E({employee_id:i.id||"",holiday_id:""}),k=s=>{s.preventDefault(),l==="create"?g("/assign-holiday-work",{onSuccess:()=>{a.success("Holiday work assigned successfully!"),t()},onError:()=>{console.error(r)}}):v(`/update-holiday-work/${b.id}`,{onSuccess:()=>{a.success("Holiday work updated successfully!"),t()},onError:()=>{console.error(r)}})},_=s=>{confirm("Are you sure you want to delete this assignment?")&&A(`/delete-holiday-work/${s}`,{onSuccess:()=>{a.success("Holiday work deleted successfully!")},onError:()=>{console.error(r)}})},S=(s,o=null)=>{f(s),N(o),o?n({employee_id:o.employee_id,holiday_id:o.holiday_id}):u(),c(!0)},t=()=>{u(),c(!1)};return e.jsxs("div",{className:"w-[85.2%] absolute right-0 overflow-hidden",children:[e.jsx(H,{user:h,notif:p}),e.jsx(M,{user_type:m}),e.jsxs("div",{className:"p-3 px-[12rem] table-section",children:[e.jsx("button",{onClick:()=>S("create"),className:"underline",children:"Assign Work"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#0A1B3F] text-white",children:[e.jsx("th",{className:"p-2 border",children:"Employee"}),e.jsx("th",{className:"p-2 border",children:"Holiday"}),e.jsx("th",{className:"p-2 border",children:"Actions"})]})}),e.jsx("tbody",{children:y.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border",children:s.name}),e.jsxs("td",{className:"p-2 border",children:[" ",s.title]}),e.jsx("td",{className:"p-2 border",children:e.jsxs("button",{onClick:()=>_(s.id),className:"bg-[#FF3A6E] text-white p-2 rounded-md",children:[" ",e.jsx(C,{})," "]})})]},s.id))})]}),j&&e.jsxs("div",{className:"fixed top-0 left-0 z-50 flex items-center justify-center w-full h-screen bg-gray-900 bg-opacity-20",children:[e.jsx("h3",{children:l==="create"?"Assign Work":"Edit Assignment"}),e.jsxs("form",{onSubmit:k,className:"space-y-4 bg-white p-7 w-[40%]",children:[e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",value:i.name,readOnly:!0,className:"w-full rounded-md"})}),e.jsx("div",{className:"form-group",children:e.jsxs("select",{className:"w-full rounded-md",value:w.holiday_id,onChange:s=>n("holiday_id",s.target.value),children:[e.jsx("option",{value:"",children:"Select Holiday"}),x.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),r.holiday_id&&e.jsx("div",{className:"error",children:r.holiday_id}),e.jsx("button",{className:"p-1 px-2 text-white bg-blue-600 rounded-md",type:"submit",children:l==="create"?"Assign Work":"Update Assignment"}),e.jsx("button",{type:"button",onClick:t,className:"p-1 px-2 ml-3 text-white bg-red-700 rounded-md",children:"Cancel"})]})]})]})]})}export{O as default};
