import{r as c,W as v,j as e}from"./app-DecQ0f_S.js";import C from"./sidebar-Be9qf3jp.js";import{H as E,N as M}from"./Nav-BWBa_EZw.js";import{M as S}from"./Modal-BhgbF3q9.js";import{N as k}from"./notyf.min-DLu_xjpT.js";import"./iconBase-DWhxbjqT.js";import"./index-BPKSu1J7.js";import"./index-c1-G4gL8.js";import"./transition-CWN7uk3v.js";const W=({user:h,notif:u,user_type:x,documents:p})=>{const[b,l]=c.useState(!1),[t,o]=c.useState(null),r=new k,{data:j,setData:d,post:N,put:f,reset:y,errors:i}=v({name:""});c.useEffect(()=>{n()},[]);const n=async()=>{try{const s=await axios.get("/documents");setBranches(s.data)}catch(s){console.error("Error fetching branches:",s)}},m=(s=null)=>{l(!0),d("name",s?s.name:""),o(s?s.id:null)},a=()=>{l(!1),o(null),y("name")},g=s=>{s.preventDefault(),t?f(`/documents/${t}`,{onSuccess:()=>{r.success("Branch updated successfully!"),n(),a()},onError:()=>{r.error("An error occurred while updating the branch.")}}):N("/documents",{onSuccess:()=>{r.success("Branch created successfully!"),n(),a()},onError:()=>{r.error("An error occurred while creating the branch.")}})},w=async s=>{if(confirm("Are you sure you want to delete this branch?"))try{await axios.delete(`/documents/${s}`),r.success("Branch deleted successfully!"),window.location.reload()}catch(B){console.error("Error deleting branch:",B),r.error("An error occurred while deleting the branch.")}};return e.jsxs("div",{className:"w-[85.2%] absolute right-0",children:[e.jsx(E,{user:h,notif:u}),e.jsx(M,{user_type:x}),e.jsxs("div",{className:"flex px-9",children:[e.jsx(C,{}),e.jsxs("div",{className:"flex-1 p-6 bg-gray-100",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"Manage documents"}),e.jsx("button",{onClick:()=>m(),className:"p-2 text-teal-900 underline rounded-md",children:"Create documents"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left border-b",children:"documents Name"}),e.jsx("th",{className:"px-4 py-2 text-right border-b",children:"Action"})]})}),e.jsx("tbody",{className:"",children:p.map(s=>e.jsxs("tr",{className:"transition duration-200 hover:bg-gray-100",children:[e.jsx("td",{className:"px-4 py-2 border-b",children:s.name}),e.jsxs("td",{className:"px-4 py-2 text-right border-b",children:[e.jsx("button",{onClick:()=>m(s),className:"text-blue-600 underline hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>w(s.id),className:"ml-4 text-red-600 underline hover:text-red-800",children:"Delete"})]})]},s.id))})]})})]})]}),e.jsx(S,{show:b,onClose:a,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold",children:t?"Edit Branch":"Create New Branch"}),i.name&&e.jsx("p",{className:"text-red-600",children:i.name}),e.jsxs("form",{onSubmit:g,className:"mt-4",children:[e.jsxs("label",{className:"block mb-2",children:["Branch Name:",e.jsx("input",{type:"text",value:j.name,onChange:s=>d("name",s.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),e.jsx("button",{type:"submit",className:"p-2 mt-4 text-white bg-blue-600 rounded-md",children:t?"Update Branch":"Create Branch"}),e.jsx("button",{onClick:a,type:"button",className:"p-2 mt-2 text-white bg-red-600 rounded-md",children:"Close"})]})]})})]})};export{W as default};
