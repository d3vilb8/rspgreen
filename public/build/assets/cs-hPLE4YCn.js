import{r as i,j as e}from"./app-DecQ0f_S.js";import{u as y}from"./index-DAUA1xsM.js";import{d as j}from"./index-gHrjMQXW.js";const C=({customerInfo:m,id:x})=>{const[o,u]=i.useState(""),[h,r]=i.useState(!1),{data:l,setData:d,post:b,processing:n,errors:t}=y({name:"",file:null}),p=s=>{d("file",s.target.files[0])},g=s=>{s.preventDefault();const a=new FormData;a.append("name",l.name),a.append("file",l.file),b(`/upload-documents/${x}`,a,{onFinish:()=>{r(!1)}})},f=s=>{window.confirm("Are you sure you want to delete this document?")&&j.Inertia.delete(`/delete-document/${s}`,{onSuccess:()=>{alert("Document deleted successfully")},onError:()=>{alert("Failed to delete document")}})},c=m.filter(s=>s.name.toLowerCase().includes(o.toLowerCase()));return e.jsxs("div",{className:"w-full min-h-screen bg-gray-50 flex flex-col items-center",children:[e.jsxs("div",{className:"w-full max-w-5xl p-6 mt-8 bg-white shadow-md rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg shadow hover:bg-gray-700 transition",onClick:()=>window.history.back(),children:"Back"})}),e.jsx("button",{className:"bg-blue-600 text-white px-5 py-2 rounded-lg shadow hover:bg-blue-700 transition",onClick:()=>r(!0),children:"Upload"})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by document name...",className:"w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:o,onChange:s=>u(s.target.value)})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-200 shadow-md rounded-md",children:[e.jsx("thead",{className:"bg-blue-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-200 px-4 py-3 text-left text-gray-700",children:"Name"}),e.jsx("th",{className:"border border-gray-200 px-4 py-3 text-left text-gray-700",children:"Uploaded Document"}),e.jsx("th",{className:"border border-gray-200 px-4 py-3 text-left text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:c.length>0?c.map((s,a)=>e.jsxs("tr",{className:`${a%2===0?"bg-white":"bg-gray-50"} hover:bg-gray-100`,children:[e.jsx("td",{className:"border border-gray-200 px-4 py-3",children:s.name}),e.jsx("td",{className:"border border-gray-200 px-4 py-3",children:e.jsx("a",{href:`/storage/${s.uploaded_file}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:"View Document"})}),e.jsx("td",{className:"border border-gray-200 px-4 py-3",children:e.jsx("button",{onClick:()=>f(s.id),className:"text-red-600 hover:text-red-800",children:"Delete"})})]},a)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center text-gray-500 py-4",children:"No results found."})})})]})})]}),h&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Upload New Document"}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"File Name"}),e.jsx("input",{type:"text",name:"name",className:"w-full border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:l.name,onChange:s=>d("name",s.target.value)}),t.name&&e.jsx("span",{className:"text-red-600",children:t.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Choose File"}),e.jsx("input",{type:"file",name:"file",className:"w-full border border-gray-300 rounded px-4 py-2 focus:outline-none",onChange:p}),t.file&&e.jsx("span",{className:"text-red-600",children:t.file})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",className:"bg-gray-500 text-white px-4 py-2 rounded shadow hover:bg-gray-600 transition mr-2",onClick:()=>r(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:`bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 transition ${n?"opacity-50":""}`,disabled:n,children:n?"Uploading...":"Upload"})]})]})]})})]})};export{C as default};
