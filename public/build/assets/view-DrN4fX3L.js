import{r as o,j as e,a as c}from"./app-DecQ0f_S.js";import{H as p,N}from"./Nav-BWBa_EZw.js";import{c as g,h as S}from"./index-BPKSu1J7.js";import{R as v}from"./index-e435n7mr.js";import"./iconBase-DWhxbjqT.js";import"./index-c1-G4gL8.js";const $=({user:i,project:r,task:x,user_type:l,notif:h})=>{const[d,j]=o.useState({}),[u,m]=o.useState([]),b=(s,t)=>{const a=s.target.value;j(n=>({...n,[t]:a})),axios.post(`/project-task-status/${t}`,{status:a,onSuccess:n=>{console.log("Success:",n)},onError:n=>{console.error("Error:",n)}})};o.useState(!0),o.useEffect(()=>{Array.isArray(l)?m(l):console.error("Expected user_type to be an array:",l)},[l]);const f=(s,t)=>{s.preventDefault(),confirm("Are you sure you want to delete this employee?")&&axios.get(`/task-delete/${t}`).then(a=>{console.log(a),alert("Employee deleted successfully"),window.location.reload()}).catch(a=>{console.log(a)})};return e.jsxs("div",{className:"px-[8rem] relative",children:[e.jsx(p,{user:i,notif:h}),e.jsx(N,{user_type:l}),e.jsx("div",{className:"flex flex-col gap-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:" "}),e.jsxs("span",{children:["Project name : ",r.title]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("span",{children:["Project Budget : ",r.estimate_budget]}),e.jsx("br",{}),e.jsxs("span",{children:["Start Date : ",r.start_date]}),e.jsx("br",{}),e.jsxs("span",{children:["End Date : ",r.end_date]}),e.jsx(c,{href:`/task-create/${r.id}`,children:e.jsxs("button",{className:"px-4 py-2 text-white bg-blue-500 rounded-md",children:[e.jsx(g,{}),"  Task"]})})]})}),e.jsxs("table",{class:"table border w-full p-4",children:[e.jsx("thead",{className:"border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left border",children:" Task Name"}),e.jsx("th",{className:"p-3 text-left border",children:"Start Date"}),e.jsx("th",{className:"p-3 text-left border",children:"End Date"}),e.jsx("th",{className:"p-3 text-left border",children:"Estimate Hours"}),e.jsx("th",{className:"p-3 text-left border",children:"Status"}),e.jsx("th",{className:"p-3 text-left border",children:"Action"})]})}),e.jsx("tbody",{children:x.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 border",children:s.task_name}),e.jsx("td",{className:"p-3 border",children:s.sdate}),e.jsx("td",{className:"p-3 border",children:s.edate}),e.jsxs("td",{className:"p-3 border",children:[s.estimate_hours,"hours"]}),u.includes("edit_status")&&e.jsx("td",{className:"p-3 border",children:e.jsxs("select",{className:`border-none appearance-none text-blue-600 bg-transparent bg-[url('')] ${d[s.id]==="0"?"text-red-500":d[s.id]==="1"?"text-yellow-500":d[s.id]==="2"?"text-blue-500":d[s.id]==="3"?"text-green-500":"text-gray-500"}`,value:d[s.id]||s.status,name:"status",onChange:t=>b(t,s.id),children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"0",children:"Pending"}),e.jsx("option",{value:"1",children:"In Progress"}),e.jsx("option",{value:"2",children:"Open"}),e.jsx("option",{value:"3",children:"Close"})]})}),e.jsx("td",{className:"border",children:e.jsxs("div",{className:"flex",children:[e.jsx(c,{className:"text-green-800 text-[1.5rem]",href:`task-edit/${s.id}`,children:e.jsx(S,{})}),e.jsx("button",{className:"text-red-800 text-[1.5rem]",onClick:t=>f(t,s.id),children:e.jsx(v,{})})]})})]},s.id))})]})]})};export{$ as default};
