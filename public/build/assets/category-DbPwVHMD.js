import{r as u,W as f,j as e}from"./app-DecQ0f_S.js";import C from"./sidebar-MQjY8Dn3.js";import{M as w}from"./Modal-BhgbF3q9.js";import{N as v}from"./notyf.min-DLu_xjpT.js";import"./Nav-BWBa_EZw.js";import"./iconBase-DWhxbjqT.js";import"./index-BPKSu1J7.js";import"./index-c1-G4gL8.js";import"./transition-CWN7uk3v.js";const F=({user:T,notif:k,user_type:A,category:x,type:h})=>{const[p,n]=u.useState(!1),[s,c]=u.useState(null),r=new v,{data:d,setData:o,post:i,put:S,delete:b,reset:y,errors:a}=f({name:""}),m=(t=null)=>{n(!0),o("name",t?t.name:""),c(t?t.id:null)},l=()=>{n(!1),c(null),y("name")},j=t=>{t.preventDefault(),s?(console.log(s),i(`/account/category/update/${s}`,{onSuccess:()=>{r.success("Category updated successfully!"),l()},onError:()=>{r.error("An error occurred while updating the tax.")}})):i("/account/category/store",{onSuccess:()=>{r.success("Category created successfully!"),l()},onError:()=>{r.error("An error occurred while creating the tax.")}})},g=async t=>{if(confirm("Are you sure you want to delete this tax?"))try{await b(`/account/category/delete/${t}`),r.success("Tax deleted successfully!"),window.location.reload()}catch(N){console.error("Error deleting tax:",N),r.error("An error occurred while deleting the tax.")}};return e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"flex px-9",children:e.jsxs("div",{className:"flex-1 p-6 bg-gray-100",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"Manage Category"}),e.jsx("button",{onClick:()=>m(),className:"p-2 text-teal-900 underline rounded-md",children:"Create Tax"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left border-b",children:" Name"}),e.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Account type"}),e.jsx("th",{className:"px-4 py-2 text-right border-b",children:"Action"})]})}),e.jsx("tbody",{children:x.map(t=>e.jsxs("tr",{className:"transition duration-200 hover:bg-gray-100",children:[e.jsx("td",{className:"px-4 py-2 border-b",children:t.cname}),e.jsx("td",{className:"px-4 py-2 border-b",children:t.tname}),e.jsxs("td",{className:"px-4 py-2 text-right border-b",children:[e.jsx("button",{onClick:()=>m(t),className:"text-blue-600 underline hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>g(t.id),className:"ml-4 text-red-600 underline hover:text-red-800",children:"Delete"})]})]},t.id))})]})})]})}),e.jsx(w,{show:p,onClose:l,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold",children:s?"Edit Tax":"Create New Category"}),a.name&&e.jsx("p",{className:"text-red-600",children:a.name}),a.amount&&e.jsx("p",{className:"text-red-600",children:a.amount}),e.jsxs("form",{onSubmit:j,className:"mt-4",children:[e.jsxs("label",{className:"block mb-2",children:["Category Name:",e.jsx("input",{type:"text",value:d.name,onChange:t=>o("name",t.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("label",{className:"block mb-2",children:["Account Type:",e.jsxs("select",{value:d.type_id,onChange:t=>o("type_id",t.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0,children:[e.jsx("option",{value:"",children:"Select Account Type"}),h.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsx("button",{type:"submit",className:"p-2 mt-4 text-white bg-blue-600 rounded-md",children:s?"Update Category":"Create Category"}),e.jsx("button",{onClick:l,type:"button",className:"p-2 mt-2 text-white bg-red-600 rounded-md",children:"Close"})]})]})})]})};export{F as default};
