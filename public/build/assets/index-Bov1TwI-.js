import{r as s,j as e}from"./app-DecQ0f_S.js";import{H as L,N as D}from"./Nav-BWBa_EZw.js";import"./iconBase-DWhxbjqT.js";import"./index-BPKSu1J7.js";import"./index-c1-G4gL8.js";const I=({user:f,notif:j,user_type:g,holidays:m,vacations:d})=>{const[N,u]=s.useState(!1),[n,c]=s.useState(!1),[x,v]=s.useState(""),[r,h]=s.useState(""),[l,i]=s.useState(null),[p,w]=s.useState("");s.useState({}),console.log("vacations:",d),s.useEffect(()=>{const a=document.querySelector('meta[name="csrf-token"]').getAttribute("content");w(a)},[]);const S=a=>{const t=a.target.value;h(t),console.log("Selected Location:",t)};Array.from(new Set(m.map(a=>a.location)));const C=(a=null)=>{a!==null?(c(!0),i(a)):(c(!1),i(null)),u(!0)},b=()=>{u(!1),c(!1),i(null)},k=async a=>{try{(await fetch("/holidays-location",{method:"POST",headers:{"X-CSRF-TOKEN":p},body:a})).ok?(alert("Holiday added successfully!"),window.location.reload()):alert("Failed to add holiday.")}catch(t){console.error("Error adding holiday:",t),alert("Failed to add holiday.")}},H=async(a,t)=>{try{(await fetch(`/holidays-location/${a}`,{method:"PUT",headers:{"X-CSRF-TOKEN":p},body:t})).ok?(alert("Holiday updated successfully!"),window.location.reload()):alert("Failed to update holiday.")}catch(o){console.error("Error updating holiday:",o),alert("Failed to update holiday.")}},E=a=>{a.preventDefault();const t=new FormData(a.target);if(!t.get("name")||!t.get("start_date")||!t.get("end_date")||!t.get("location")){console.error("Validation failed: All fields are required."),alert("Please fill in all fields.");return}n&&l?H(l.id,t):k(t)},y=m.filter(a=>{const t=a.name.toLowerCase().includes(x.toLowerCase()),o=r===""||a.location===r;return t&&o});return e.jsxs("div",{className:"w-[83.2%] ml-[11.5rem] absolute right-0",children:[e.jsx(L,{user:f,notif:j}),e.jsx(D,{user_type:g}),e.jsxs("div",{className:"flex flex-col px-9",children:[e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx("input",{type:"text",placeholder:"Search...",className:"border border-gray-300 rounded-md px-4 py-2 w-64",value:x,onChange:a=>v(a.target.value)}),e.jsxs("select",{className:"border border-gray-300 rounded-md px-4 py-2 w-48",value:r,onChange:a=>h(a.target.value),children:[e.jsx("option",{value:"",children:"Select Location"}),d.map((a,t)=>e.jsx("option",{value:a,children:a},t))]})]}),e.jsx("button",{className:"bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600",onClick:()=>C(),children:"Create Holiday"})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Holiday Name"}),e.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Start Date"}),e.jsx("th",{className:"px-4 py-2 text-left border-b",children:"End Date"}),e.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Location"})]})}),e.jsx("tbody",{children:y.length>0?y.map(a=>e.jsxs("tr",{className:"transition duration-200 hover:bg-gray-100",children:[e.jsx("td",{className:"px-4 py-2 border-b",children:a.name}),e.jsx("td",{className:"px-4 py-2 border-b",children:a.start_date}),e.jsx("td",{className:"px-4 py-2 border-b",children:a.end_date}),e.jsx("td",{className:"px-4 py-2 border-b",children:a.location})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-4",children:"No data found"})})})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 relative",children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700",onClick:b,children:"Ã—"}),e.jsx("h2",{className:"text-lg font-bold mb-4",children:n?"Edit Holiday":"Create Holiday"}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Holiday Name"}),e.jsx("input",{type:"text",name:"name",className:"border border-gray-300 rounded-md px-4 py-2 w-full",defaultValue:l?l.name:""})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Start Date"}),e.jsx("input",{type:"date",name:"start_date",className:"border border-gray-300 rounded-md px-4 py-2 w-full",defaultValue:l?l.start_date:""})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"End Date"}),e.jsx("input",{type:"date",name:"end_date",className:"border border-gray-300 rounded-md px-4 py-2 w-full",defaultValue:l?l.end_date:""})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Location"}),e.jsxs("select",{value:r,onChange:S,className:"border border-gray-300 rounded-md px-4 py-2 w-full",name:"location",children:[e.jsx("option",{value:"",children:"Select Location"}),d.map((a,t)=>e.jsx("option",{value:a,children:a},t))]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600",children:n?"Update Holiday":"Create Holiday"}),e.jsx("button",{type:"button",className:"bg-gray-300 text-black px-6 py-2 rounded-md",onClick:b,children:"Cancel"})]})]})]})})]})]})};export{I as default};
