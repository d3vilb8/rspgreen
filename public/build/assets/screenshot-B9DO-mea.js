import{r as a,j as e,a as _}from"./app-DecQ0f_S.js";import{H as C,N as k}from"./Nav-BWBa_EZw.js";import{C as F}from"./choices.min-DQfvTG_5.js";import{d as h}from"./index-BPKSu1J7.js";import{d as n}from"./index-gHrjMQXW.js";import"./iconBase-DWhxbjqT.js";import"./index-c1-G4gL8.js";function O({user:u,user_type:f,notif:j,emp:c,imgs:y,empi:g,sd:N,ed:b,groupedImgsWithUniqueDownload:i}){const x=a.useRef(null),w=Object.entries(y),[r,v]=a.useState(g),[o,D]=a.useState(N),[d,E]=a.useState(b);a.useEffect(()=>{const t=new F(x.current,{removeItemButton:!0,searchEnabled:!0});return()=>{t.destroy()}},[]);const m=t=>{n.Inertia.post("/bulk/download",{images:t},{onSuccess:()=>{console.log("Download successful"),window.location.reload()},onError:s=>{console.error("Error during file generation:",s)}})},p=t=>{if(t&&t.length>0){const s=t.map(l=>l.id);console.log("Images to delete:",s),confirm("Are you sure you want to delete these items?")&&n.Inertia.post("/bulk/delete",{images:s},{onSuccess:()=>{console.log("Deleted successfully"),n.Inertia.get("/screenshot/employee",{employee_id:r,start_date:o,end_date:d}),window.location.reload()},onError:l=>{console.error("Error during deletion:",l),alert("An error occurred while deleting the images.")}})}else console.error("No images found for deletion.")},S=t=>{t.preventDefault(),n.Inertia.get("/screenshot/employee",{employee_id:r,start_date:o,end_date:d})};return e.jsxs("div",{className:"w-[83%] h-full absolute right-0 overflow-hidden",children:[e.jsx(C,{user:u,notif:j}),e.jsx(k,{user_type:f}),e.jsxs("form",{onSubmit:S,className:"w-full flex",children:[e.jsxs("div",{className:"w-1/4 p-2 flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"employee",className:"text-sm font-semibold",children:"Employee"}),e.jsxs("select",{ref:x,id:"employee",value:r,onChange:t=>v(t.target.value),className:"rounded text-sm",children:[e.jsx("option",{value:"",children:"All"}),c&&c.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"w-1/4 p-2 flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"start_date",className:"text-sm font-semibold",children:"Start Date"}),e.jsx("input",{type:"date",id:"start_date",value:o,onChange:t=>D(t.target.value),className:"rounded text-sm"})]}),e.jsxs("div",{className:"w-1/4 p-2 flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"end_date",className:"text-sm font-semibold",children:"End Date"}),e.jsx("input",{type:"date",id:"end_date",value:d,onChange:t=>E(t.target.value),className:"rounded text-sm"})]}),e.jsxs("div",{className:"w-1/4 p-2 pb-5 flex items-end gap-2 justify-start",children:[e.jsx(_,{className:"rounded bg-red-500 text-white px-4 py-2 text-sm",href:"/screenshot/employee",children:"Reset"}),e.jsx("button",{type:"submit",className:"rounded bg-blue-500 text-white px-4 py-2 text-sm",children:"Filter"})]})]}),e.jsx("div",{className:"px-2",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 bg-zinc-700 text-white rounded-l",children:"#"}),e.jsx("th",{className:"py-2 px-4 bg-zinc-700 text-white",children:"Timestamp"}),e.jsx("th",{className:"py-2 px-4 bg-zinc-700 text-white rounded-r",children:"Action"})]})}),e.jsx("tbody",{children:i.length>0?i.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm",children:s+1}),e.jsx("td",{className:"px-4 py-2 text-sm",children:new Date(t.date).toDateString()}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>m(t.images),className:"flex items-center gap-1 bg-blue-500 text-white px-5 py-1 rounded-full",children:[e.jsx(h,{}),e.jsx("span",{children:"Download"})]}),t.is_download===1&&e.jsx("button",{onClick:()=>p(t.images),className:"flex items-center gap-1 bg-red-500 text-white px-5 py-1 rounded-full",children:e.jsx("span",{children:"Delete"})})]})})]},s)):w.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm",children:s+1}),e.jsx("td",{className:"px-4 py-2 text-sm",children:new Date(t[0]).toDateString()}),e.jsx("td",{className:"px-4 py-2 text-sm",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>m(t[1]),className:"flex items-center gap-1 bg-blue-500 text-white px-5 py-1 rounded-full",children:[e.jsx(h,{}),e.jsx("span",{children:"Download"})]}),t[1].some(l=>l.is_download===1)&&e.jsx("button",{onClick:()=>p(t[1]),className:"flex items-center gap-1 bg-red-500 text-white px-5 py-1 rounded-full",children:e.jsx("span",{children:"Delete"})})]})})]},s))})]})})]})}export{O as default};
