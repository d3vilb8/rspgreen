import{r as x,W as g,j as e}from"./app-OWEBvdtC.js";import w from"./sidebar-wW65GsJs.js";import{M as T}from"./Modal-Di6ygOb6.js";import{N as v}from"./notyf.min-DLu_xjpT.js";import"./Nav-CmIRCLvo.js";import"./iconBase-hI8KM4xB.js";import"./index-CGRCqaVb.js";import"./index-BSTxKt_a.js";import"./transition-CLzje324.js";const F=({user:C,notif:k,user_type:A,tax:m})=>{const[u,o]=x.useState(!1),[s,c]=x.useState(null),t=new v,{data:d,setData:a,post:p,put:h,delete:b,reset:j,errors:l}=g({name:"",percent:""}),i=(r=null)=>{o(!0),a("name",r?r.name:""),a("percent",r?r.percent:""),c(r?r.id:null)},n=()=>{o(!1),c(null),j("name","percent")},N=r=>{r.preventDefault(),s?(console.log(s),h(`/tax-update/${s}`,{onSuccess:()=>{t.success("Tax updated successfully!"),window.location.reload(),n()},onError:()=>{t.error("An error occurred while updating the tax.")}})):p("/tax-store",{onSuccess:()=>{t.success("Tax created successfully!"),window.location.reload(),n()},onError:()=>{t.error("An error occurred while creating the tax.")}})},f=async r=>{if(confirm("Are you sure you want to delete this tax?"))try{await b(`/tax-delete/${r}`),t.success("Tax deleted successfully!"),window.location.reload()}catch(y){console.error("Error deleting tax:",y),t.error("An error occurred while deleting the tax.")}};return e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"flex px-9",children:e.jsxs("div",{className:"flex-1 p-6 bg-gray-100",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"Manage Taxes"}),e.jsx("button",{onClick:()=>i(),className:"p-2 text-teal-900 underline rounded-md",children:"Create Tax"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Tax Name"}),e.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Amount"}),e.jsx("th",{className:"px-4 py-2 text-right border-b",children:"Action"})]})}),e.jsx("tbody",{children:m.map(r=>e.jsxs("tr",{className:"transition duration-200 hover:bg-gray-100",children:[e.jsx("td",{className:"px-4 py-2 border-b",children:r.name}),e.jsx("td",{className:"px-4 py-2 border-b",children:r.percent}),e.jsxs("td",{className:"px-4 py-2 text-right border-b",children:[e.jsx("button",{onClick:()=>i(r),className:"text-blue-600 underline hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>f(r.id),className:"ml-4 text-red-600 underline hover:text-red-800",children:"Delete"})]})]},r.id))})]})})]})}),e.jsx(T,{show:u,onClose:n,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold",children:s?"Edit Tax":"Create New Tax"}),l.name&&e.jsx("p",{className:"text-red-600",children:l.name}),l.percent&&e.jsx("p",{className:"text-red-600",children:l.percent}),e.jsxs("form",{onSubmit:N,className:"mt-4",children:[e.jsxs("label",{className:"block mb-2",children:["Tax Name:",e.jsx("input",{type:"text",value:d.name,onChange:r=>a("name",r.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("label",{className:"block mb-2",children:["Amount:",e.jsx("input",{type:"text",value:d.percent,onChange:r=>a("percent",r.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),e.jsx("button",{type:"submit",className:"p-2 mt-4 text-white bg-blue-600 rounded-md",children:s?"Update Tax":"Create Tax"}),e.jsx("button",{onClick:n,type:"button",className:"p-2 mt-2 text-white bg-red-600 rounded-md",children:"Close"})]})]})})]})};export{F as default};
