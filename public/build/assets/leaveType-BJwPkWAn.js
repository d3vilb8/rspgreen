import{r as o,j as e,b as M}from"./app-DecQ0f_S.js";import{H as D,N as L,c as k}from"./Nav-BWBa_EZw.js";import{u as F}from"./index-DAUA1xsM.js";import{c as S,h as O}from"./index-BPKSu1J7.js";import{R as A}from"./index-e435n7mr.js";import"./iconBase-DWhxbjqT.js";import"./index-c1-G4gL8.js";import"./index-gHrjMQXW.js";const U=({leaveTypes:b,user:f,user_type:N,notif:g,employees:v})=>{const[l,c]=o.useState(!1),[m,p]=o.useState(!1),[x,h]=o.useState(null),{data:t,setData:u,post:j,errors:d,reset:y}=F({type_name:"",days:"",employee_id:""}),w=(s,i)=>{s.preventDefault(),confirm("Are you sure you want to delete this employee?")&&M.get(`/leave-delete/${i}`).then(a=>{console.log(a),alert("Employee deleted successfully"),window.location.reload()}).catch(a=>{console.log(a)})},_=()=>{y(),c(!0)},C=s=>{u({type_name:s.type_name,days:s.days,employee_id:s.employee_id}),h(s),p(!0)},r=()=>{c(!1),p(!1),h(null),y()},n=s=>{u(s.target.name,s.target.value)},E=s=>{s.preventDefault(),l?j("/leave-store",t).then(()=>r()):m&&x&&j(`/leave-update/${x.id}`,t).then(()=>r())};return e.jsxs("div",{className:"w-[85.2%] ml-[11.5rem]",children:[e.jsx(D,{user:f,notif:g}),e.jsx(L,{user_type:N}),e.jsx("div",{className:"flex items-center justify-end p-4",children:e.jsx("button",{onClick:_,className:"p-2 text-white bg-blue-600 rounded-md ",children:e.jsx(S,{})})}),e.jsx("div",{className:"p-3 table-section",children:e.jsx("div",{className:" px-[8rem]",children:e.jsxs("table",{className:"table w-full",children:[e.jsx("thead",{className:"bg-[#065E91] text-white",children:e.jsxs("tr",{className:"p-3",children:[e.jsx("th",{className:"p-3 text-left border",children:"Leave Type"}),e.jsx("th",{className:"p-3 text-left border",children:"Employee"}),e.jsx("th",{className:"p-3 text-right border",children:"Days"}),e.jsx("th",{className:"p-3 text-right border",children:"Action"})]})}),e.jsx("tbody",{children:b.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 border",children:s.type_name}),e.jsx("td",{className:"p-3 border",children:s.name}),e.jsx("td",{className:"p-3 text-right border",children:s.days}),e.jsxs("td",{className:"p-3 text-right border",children:[e.jsx("button",{onClick:()=>C(s),children:e.jsx(O,{})}),e.jsx("button",{onClick:a=>w(a,s.id),children:e.jsx(A,{})})]})]},i))}),(l||m)&&e.jsx("div",{className:"fixed top-0 left-0 z-50 flex items-center justify-center w-full h-screen bg-gray-900 bg-opacity-20",children:e.jsxs("div",{className:"p-10 w-full max-w-[500px] relative bg-white rounded-md shadow-md",children:[e.jsx("div",{className:" absolute right-[10px] top-[13px] text-[1.5rem] ",children:e.jsx("button",{onClick:r,className:" text-black w-[20%]",children:e.jsx(k,{})})}),e.jsx("h2",{className:"text-2xl font-bold",children:l?"Add Leave Type":"Edit Leave Type"}),e.jsxs("form",{onSubmit:E,className:"grid  gap-4",children:[e.jsx("div",{className:"form-group w-full",children:e.jsxs("select",{name:"employee_id",id:"",value:t.employee_id,className:"w-full rounded",onChange:n,children:[e.jsx("option",{value:"",children:"select employee"}),v.map(s=>e.jsx("option",{value:s.id,children:s.name}))]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type_name",children:"Leave Type Name"}),e.jsx("input",{id:"type_name",className:"w-full rounded-lg",name:"type_name",type:"text",value:t.type_name,onChange:n,required:!0}),d.type_name&&e.jsx("div",{children:d.type_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"days",children:"Days"}),e.jsx("input",{className:"w-full rounded-lg",id:"days",name:"days",type:"number",value:t.days,onChange:n}),d.days&&e.jsx("div",{children:d.days})]}),e.jsx("button",{type:"submit",className:"bg-blue-600 p-2 rounded-md text-white w-[35%]",children:l?"Create":"Update"})]})]})})]})})})]})};export{U as default};
