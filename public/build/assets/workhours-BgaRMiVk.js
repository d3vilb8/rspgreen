import{r as l,j as e,a as z}from"./app-DecQ0f_S.js";import{H as F,N as T}from"./Nav-BWBa_EZw.js";import{d as j}from"./index-gHrjMQXW.js";import{e as I,f as R}from"./index-BPKSu1J7.js";import{M as D}from"./Modal-BhgbF3q9.js";import{C as M}from"./choices.min-DQfvTG_5.js";import"./iconBase-DWhxbjqT.js";import"./index-c1-G4gL8.js";import"./transition-CWN7uk3v.js";function W({user:u,user_type:g,notif:y,emp:n,hoursByUserAndDate:s,empi:N,sd:b,ed:f}){const r=l.useRef(null),[i,d]=l.useState([]),[w,c]=l.useState(!1),[x,v]=l.useState(N),[m,_]=l.useState(b),[o,S]=l.useState(f),p=Object.entries(s.data);l.useEffect(()=>{const t=new M(r.current,{removeItemButton:!0,searchEnabled:!0});return()=>{t.destroy()}},[]);const L=t=>{t.preventDefault(),j.Inertia.get("/workhours/employee",{employee_id:x,start_date:m,end_date:o})};function C(t,a){c(!0),d(a)}function E(){c(!1),d([])}const h=t=>{j.Inertia.get("/workhours/employee",{page:t},{preserveState:!0})};return e.jsxs("div",{className:"w-[83%] h-full absolute right-0 overflow-hidden",children:[e.jsx(D,{show:w,children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-lg font-medium",children:"User Logs"}),e.jsx("button",{onClick:()=>E(),children:e.jsx(I,{})})]}),e.jsx("div",{className:"py-3 h-96 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3 bg-gray-800 text-white rounded-l",children:"#"}),e.jsx("th",{className:"py-2 w-36 px-3 bg-gray-800 text-white",children:"Type"}),e.jsx("th",{className:"py-2 w-96 px-3 bg-gray-800 text-white",children:"Location"}),e.jsx("th",{className:"py-2 px-3 bg-gray-800 text-white rounded-r",children:"Timestamp"})]})}),e.jsx("tbody",{children:i&&i.map((t,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-3 text-sm",children:a+1}),e.jsx("td",{className:"py-2 px-3 text-sm",children:t.type==="loggedin"?e.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded",children:"Logged In"}):e.jsx("span",{className:"bg-red-500 text-white px-3 py-1 rounded",children:"Logged Out"})}),e.jsx("td",{children:t.type==="loggedin"?e.jsx("span",{className:"text-sm",children:t.address}):e.jsx("span",{className:"text-sm",children:"n/a"})}),e.jsx("td",{className:"py-2 px-3 text-sm",children:new Date(t.timestamp).toLocaleString()})]},a))})]})})]})}),e.jsx(F,{user:u,notif:y}),e.jsx(T,{user_type:g}),e.jsxs("form",{onSubmit:L,className:"w-full flex",children:[e.jsxs("div",{className:"w-1/4 p-2 flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"employee",className:"text-sm font-semibold",children:"Employee"}),e.jsxs("select",{ref:r,id:"employee",value:x,onChange:t=>v(t.target.value),className:"rounded text-sm",children:[e.jsx("option",{value:"",children:"All"}),n&&n.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"w-1/4 p-2 flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"start_date",className:"text-sm font-semibold",children:"Start Date"}),e.jsx("input",{type:"date",id:"start_date",value:m,onChange:t=>_(t.target.value),className:"rounded text-sm"})]}),e.jsxs("div",{className:"w-1/4 p-2 flex flex-col space-y-1",children:[e.jsx("label",{htmlFor:"end_date",className:"text-sm font-semibold",children:"End Date"}),e.jsx("input",{type:"date",id:"end_date",value:o,onChange:t=>S(t.target.value),className:"rounded text-sm"})]}),e.jsxs("div",{className:"w-1/4 p-2 pb-5 flex items-end gap-2 justify-start",children:[e.jsx(z,{className:"rounded bg-red-500 text-white px-4 py-2 text-sm",href:"/workhours/employee",children:"Reset"}),e.jsx("button",{type:"submit",className:"rounded bg-blue-500 text-white px-4 py-2 text-sm",children:"Filter"})]})]}),e.jsx("div",{className:"px-2",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 bg-zinc-700 text-white rounded-l",children:"#"}),e.jsx("th",{className:"py-2 px-4 bg-zinc-700 text-white",children:"Name"}),e.jsx("th",{className:"py-2 px-4 bg-zinc-700 text-white",children:"Date"}),e.jsx("th",{className:"py-2 px-4 bg-zinc-700 text-white",children:"Total Time"}),e.jsx("th",{className:"py-2 px-4 bg-zinc-700 text-white",children:"Productive Time"}),e.jsx("th",{className:"py-2 px-4 bg-zinc-700 text-white",children:"Remaining Time"}),e.jsx("th",{className:"py-2 px-4 bg-zinc-700 text-white rounded-r",children:"Log Entry"})]})}),e.jsx("tbody",{children:Array.isArray(p)&&p.map((t,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm",children:a+1}),e.jsx("td",{className:"px-4 py-2 text-sm",children:t[1].name}),e.jsx("td",{className:"px-4 py-2 text-sm",children:new Date(t[1].date).toDateString()}),e.jsx("td",{className:"px-4 py-2 text-sm",children:"8 hrs"}),e.jsx("td",{className:"px-4 py-2 text-sm",children:t[1].total_time}),e.jsx("td",{className:"px-4 py-2 text-sm",children:t[1].remaining_time}),e.jsx("td",{children:e.jsx("button",{onClick:k=>C(k,t[1].logs),className:"bg-emerald-500 text-white px-2 py-1 rounded",children:e.jsx(R,{})})})]},a))})]})}),s.total!==0&&e.jsxs("div",{className:"pagination space-x-1 flex justify-center py-4",children:[e.jsx("button",{className:"bg-blue-500 px-3 text-sm py-1 rounded text-white disabled:bg-gray-400",disabled:!s.prev_page_url,onClick:()=>h(s.current_page-1),children:"Prev"}),e.jsx("span",{className:"px-4",children:s.current_page+" / "+s.last_page}),e.jsx("button",{className:"bg-blue-500 px-3 text-sm py-1 rounded text-white disabled:bg-gray-400",disabled:!s.next_page_url,onClick:()=>h(s.current_page+1),children:"Next"})]})]})}export{W as default};
