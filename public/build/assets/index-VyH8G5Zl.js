import{r as n,j as e,b as S}from"./app-OWEBvdtC.js";import{M as u}from"./Modal-Di6ygOb6.js";import{H as E,N as D}from"./Nav-CmIRCLvo.js";import{u as k}from"./index-BSDyYLbN.js";import{F as T}from"./index-CGRCqaVb.js";import{F as p,a as I}from"./index-BSTxKt_a.js";import{N as M}from"./notyf.min-DLu_xjpT.js";import"./transition-CLzje324.js";import"./iconBase-hI8KM4xB.js";import"./index-DA7AibOW.js";const j=new M,J=({user:f,notif:y,user_type:N,documents:H,employees:i,attendances:d})=>{const[g,c]=n.useState(!1),[v,m]=n.useState(!1),[r,b]=n.useState(),{post:_,put:w,data:l,setData:a,processing:O,errors:L}=k({employee_id:"",date:"",in_time:"",out_time:""});async function C(t){b(t),await S.get(`/attendances/${t}`).then(s=>{a({employee_id:s.data.employee_id,date:s.data.date,in_time:s.data.in_time,out_time:s.data.out_time})})}const x=t=>{const[s,o]=t.split(":"),h=new Date;return h.setHours(s,o),h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})};function F(t){t.preventDefault(),_(route("attendances.store"),{onSuccess(){j.success("Attandance Added")}})}function A(t){console.log(r),t.preventDefault(),w(`/attendances/${r}`,{onSuccess(){j.success("Attandance updated")}})}return e.jsxs("div",{className:"w-[85.2%] ml-[11.5rem]",children:[e.jsx(E,{user:f,notif:y}),e.jsx(D,{user_type:N}),e.jsx(u,{show:g,maxWidth:"lg",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-lg",children:"Create Attendace"}),e.jsx("button",{onClick:()=>c(!1),children:e.jsx(p,{})})]}),e.jsx("hr",{}),e.jsx("div",{className:"py-4",children:e.jsxs("form",{onSubmit:F,className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Employee"}),e.jsxs("select",{name:"employee_id",onChange:t=>a("employee_id",t.target.value),value:l.employee_id,className:"form-select rounded text-sm",children:[e.jsx("option",{value:"",children:"-- Select Employee --"}),i.map((t,s)=>e.jsx("option",{value:t.id,children:t.name},s))]})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Attandance Date"}),e.jsx("input",{type:"date",name:"date",onChange:t=>a("date",t.target.value),value:l.date,className:"form-input rounded text-sm"})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"In Time"}),e.jsx("input",{type:"time",name:"in_time",onChange:t=>a("in_time",t.target.value),value:l.in_time,className:"form-input rounded text-sm"})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Out Time"}),e.jsx("input",{type:"time",name:"out_time",onChange:t=>a("out_time",t.target.value),value:l.out_time,className:"form-input rounded text-sm"})]}),e.jsx("div",{className:"flex justify-center text-sm gap-y-2",children:e.jsx("button",{type:"submit",className:"py-2 px-5 rounded bg-blue-500 text-white",children:"Submit"})})]})})]})}),e.jsxs("div",{className:"w-full px-9",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl",children:"Manage Attendance"}),e.jsx("button",{onClick:t=>c(!0),className:"text-sm px-4 py-2 rounded text-white bg-blue-500",children:"Create Attendance"})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-4 rounded-l",children:"#"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Employee Name"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Attandance Date"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Clock In"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2",children:"Clock Out"}),e.jsx("th",{className:"py-2 bg-slate-600 text-white text-left pl-2 rounded-r",children:"Action"})]})}),e.jsx("tbody",{children:d&&d.map((t,s)=>e.jsx(n.Fragment,{children:e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pl-4 text-sm",children:s+1}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:t.name}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:new Date(t.date).toLocaleDateString()}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:x(t.in_time)}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:x(t.out_time)}),e.jsx("td",{className:"py-2 pl-2 text-sm",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:o=>{m(!0),C(t.id)},className:"px-2 py-2 bg-blue-500 rounded text-white",children:e.jsx(I,{})}),e.jsx("button",{className:"px-2 py-2 bg-red-500 rounded text-white",children:e.jsx(T,{})})]})})]})},s))})]}),e.jsx(u,{show:v,maxWidth:"lg",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-lg",children:"Edit Attendace"}),e.jsx("button",{onClick:t=>m(!1),children:e.jsx(p,{})})]}),e.jsx("hr",{}),e.jsx("div",{className:"py-4",children:e.jsxs("form",{onSubmit:A,className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Employee"}),e.jsxs("select",{name:"employee_id",onChange:t=>a("employee_id",t.target.value),value:l.employee_id,className:"form-select rounded text-sm",children:[e.jsx("option",{value:"",children:"-- Select Employee --"}),i.map((t,s)=>e.jsx("option",{value:t.id,children:t.name},s))]})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Attandance Date"}),e.jsx("input",{type:"date",onChange:t=>a("date",t.target.value),value:l.date,className:"form-input rounded text-sm"})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"In Time"}),e.jsx("input",{type:"time",onChange:t=>a("in_time",t.target.value),value:l.in_time,className:"form-input rounded text-sm"})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-y-2",children:[e.jsx("label",{htmlFor:"",children:"Out Time"}),e.jsx("input",{type:"time",onChange:t=>a("out_time",t.target.value),value:l.out_time,className:"form-input rounded text-sm"})]}),e.jsx("div",{className:"flex justify-center text-sm gap-y-2",children:e.jsx("button",{type:"submit",className:"py-2 px-5 rounded bg-blue-500 text-white",children:"Update"})})]})})]})})]})]})]})};export{J as default};
