import{W as A,r as x,j as e}from"./app-OWEBvdtC.js";import{H as F,N as S}from"./Nav-CmIRCLvo.js";import"./iconBase-hI8KM4xB.js";import"./index-CGRCqaVb.js";import"./index-BSTxKt_a.js";const Q=({user:b,notif:h,user_type:p,supplier:g,product:j})=>{const{data:a,setData:i,post:y,reset:I}=A({supplier_id:"",category:"",bill_date:"",due_date:"",bill_number:"",order_number:"",items:[{product_id:"",quantity:"",price:"",discount:"",tax:""}]}),f=()=>{i("items",[...a.items,{id:a.items.length+1,product_id:"",quantity:"",price:"",discount:"",tax:""}])},d=s=>{const{name:l,value:t}=s.target;i(l,t)},r=(s,l)=>{const{name:t,value:c}=l.target,o=[...a.items];o[s][t]=c,i("items",o)},[n,N]=x.useState({subTotal:0,totalDiscount:0,totalTax:0,totalAmount:0}),v=s=>{s.preventDefault(),y("/billing",{...a,billingforms:a.items})},w=()=>{let s=0,l=0,t=0;a.items.forEach(o=>{const _=parseFloat(o.quantity)||0,k=parseFloat(o.price)||0,C=parseFloat(o.discount)||0,T=parseFloat(o.tax)||0,m=_*k,u=m*C/100,D=(m-u)*T/100;s+=m,l+=u,t+=D});const c=s-l+t;N({subTotal:s,totalDiscount:l,totalTax:t,totalAmount:c})};return x.useEffect(()=>{w()},[a.items]),e.jsxs("div",{className:"w-[83.2%] ml-[11.5rem] absolute right-0 overflow-hidden",children:[e.jsx(F,{user:b,notif:h}),e.jsx(S,{user_type:p}),e.jsx("form",{onSubmit:v,className:"flex px-3 space-x-3",children:e.jsxs("div",{className:"max-w-4xl p-8 mx-auto bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 mb-8 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vendor"}),e.jsxs("select",{name:"supplier_id",value:a.supplier_id,onChange:d,className:"block w-full px-3 py-2 mt-1 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[e.jsx("option",{children:"Select Vendor"}),g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsx("select",{name:"category",value:a.category,onChange:d,className:"block w-full px-3 py-2 mt-1 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:e.jsx("option",{children:"Select Category"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bill Date"}),e.jsx("input",{type:"date",name:"bill_date",value:a.bill_date,onChange:d,className:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Due Date"}),e.jsx("input",{type:"date",name:"due_date",value:a.due_date,onChange:d,className:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bill Number"}),e.jsx("input",{type:"text",name:"bill_number",value:a.bill_number,onChange:d,className:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"#BILL00003"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Order Number"}),e.jsx("input",{type:"text",name:"order_number",value:a.order_number,onChange:d,className:"block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),e.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Product & Services"}),e.jsxs("div",{className:"mb-4 border-t border-b border-gray-200",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:f,className:"flex items-center justify-center w-[20%] py-2 mt-4 space-x-2 text-white bg-teal-600 rounded-md hover:bg-teal-700",children:"+ Add Item"})}),e.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[e.jsx("thead",{className:"text-gray-700 bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Items"}),e.jsx("th",{className:"p-4",children:"Quantity"}),e.jsx("th",{className:"p-4",children:"Price"}),e.jsx("th",{className:"p-4",children:"Discount"}),e.jsx("th",{className:"p-4",children:"Tax (%)"}),e.jsx("th",{className:"p-4",children:"Amount"})]})}),e.jsx("tbody",{children:a.items.map((s,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-4",children:e.jsxs("select",{name:"product_id",value:s.product_id,onChange:t=>r(l,t),className:"block w-full px-2 py-1 border border-gray-300 rounded-md",children:[e.jsx("option",{children:"Select Item"}),j.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"text",name:"quantity",value:s.quantity,onChange:t=>r(l,t),className:"block w-full px-2 py-1 border border-gray-300 rounded-md",placeholder:"Qty"})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"text",name:"price",value:s.price,onChange:t=>r(l,t),className:"block w-full px-2 py-1 border border-gray-300 rounded-md",placeholder:"Price"})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"text",name:"discount",value:s.discount,onChange:t=>r(l,t),className:"block w-full px-2 py-1 border border-gray-300 rounded-md",placeholder:"Discount"})}),e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"text",name:"tax",value:s.tax,onChange:t=>r(l,t),className:"block w-full px-2 py-1 border border-gray-300 rounded-md",placeholder:"Tax"})}),e.jsx("td",{className:"p-4 text-right",children:"0.00"})]},l))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{children:["Subtotal: ₹",n.subTotal.toFixed(2)]}),e.jsxs("div",{children:["Discount: ₹",n.totalDiscount.toFixed(2)]}),e.jsxs("div",{children:["Tax: ₹",n.totalTax.toFixed(2)]}),e.jsxs("div",{className:"font-bold",children:["Total Amount: ₹",n.totalAmount.toFixed(2)]})]})}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Save Bill"})})]})})]})};export{Q as default};
