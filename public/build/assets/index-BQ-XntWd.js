import{r as a,W as F,j as e,a as j}from"./app-OWEBvdtC.js";import{H as _,N as T}from"./Nav-CmIRCLvo.js";import{R as D}from"./index-R_jZdsaO.js";import{C as P}from"./index-Bt0IZRbn.js";import{N as I}from"./notyf.min-DLu_xjpT.js";import"./iconBase-hI8KM4xB.js";import"./index-CGRCqaVb.js";import"./index-BSTxKt_a.js";const M=new I;function G({user:f,user_type:N,notif:b,leads:d}){let g=[];const[r,w]=a.useState(""),[c,L]=a.useState(d.length>0?d:g),[n,i]=a.useState(1),[o]=a.useState(10),{delete:C}=F();a.useEffect(()=>{const s=c.filter(t=>{var l,h,u,p;return((l=t.name)==null?void 0:l.toLowerCase().includes(r.toLowerCase()))||((h=t.subject)==null?void 0:h.toLowerCase().includes(r.toLowerCase()))||((u=t.lead_stage)==null?void 0:u.toLowerCase().includes(r.toLowerCase()))||((p=t.lead_source)==null?void 0:p.toLowerCase().includes(r.toLowerCase()))});L(s)},[r,d]);const x=n*o,y=x-o,m=c.slice(y,x),E=Math.ceil(c.length/o),S=Array.from({length:E},(s,t)=>t+1),v=s=>{w(s.target.value),i(1)},A=(s,t)=>{s.preventDefault(),confirm("are u sure u want to delete?")?C(`/lead/${t}`,{onSuccess:()=>{console.log("Form submitted successfully"),M.success("Leads Deleted successfully"),window.location.reload()},onError:l=>{console.log("Form submission error",l)}}):console.log(" error fetching data")};return e.jsxs("div",{className:"w-[85.2%] absolute right-0 overflow-hidden",children:[e.jsx(_,{user:f,notif:b}),e.jsx(T,{user_type:N}),e.jsxs("div",{className:"table-section border-[#0A1B3F] py-3 px-8 rounded-b-md",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-[40%]",children:e.jsx("input",{type:"text",value:r,onChange:v,placeholder:"Search leads...",className:"p-2 border rounded-md w-[80%]"})}),e.jsx("div",{className:"px-4",children:e.jsx(j,{href:"/lead/create",className:"flex space-x-2 underline",children:e.jsx("span",{className:"font-bold",children:"Create New Lead"})})})]}),e.jsx("br",{}),e.jsxs("table",{className:"table w-full p-4 border",children:[e.jsx("thead",{className:"border bg-[#0A1B3F] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left border",children:"CLIENT NAME"}),e.jsx("th",{className:"p-3 text-left border",children:"Email"}),e.jsx("th",{className:"p-3 text-left border",children:"LEAD STAGE"}),e.jsx("th",{className:"p-3 text-left border",children:"LEAD SOURCE"}),e.jsx("th",{className:"p-3 text-left border",children:"STATUS"}),e.jsx("th",{className:"p-3 text-left border",children:"TIMESTAMP"}),e.jsx("th",{className:"p-3 text-left border",children:"ACTION"})]})}),e.jsx("tbody",{children:m.length>0?m.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 border",children:s.client_name}),e.jsx("td",{className:"p-3 border",children:s.email_address}),e.jsx("td",{className:"p-3 border",children:s.phone_number}),e.jsx("td",{className:"p-3 border",children:s.source}),e.jsx("td",{className:"p-3 border",children:s.lead_for}),e.jsx("td",{className:"p-3 border",children:s.lead_stage}),e.jsx("td",{className:"border",children:e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx(j,{className:"text-green-800 text-[1.1rem] bg-[#0C7785] p-1 rounded-md",href:`/lead/${s.id}/edit`,children:e.jsx(P,{className:"text-white"})}),e.jsx("button",{className:"text-white text-[1.1rem] bg-[#FF3A6E] p-1 rounded-md",onClick:t=>A(t,s.id),children:e.jsx(D,{})})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-3 text-center",children:"No leads found"})})})]}),e.jsx("div",{className:"flex justify-center mt-4",children:S.map(s=>e.jsx("button",{onClick:()=>i(s),className:`px-4 py-2 mx-1 rounded ${n===s?"bg-blue-500 text-white":"bg-gray-200"}`,children:s},s))})]})]})}export{G as default};
