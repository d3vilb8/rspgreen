import{W as f,r as y,j as e}from"./app-OWEBvdtC.js";import{H as N,N as _}from"./Nav-CmIRCLvo.js";import"./iconBase-hI8KM4xB.js";import"./index-CGRCqaVb.js";import"./index-BSTxKt_a.js";function I({initialData:s={},customers:u}){const{data:r,setData:a,post:x,put:b,errors:o,reset:l}=f({customer_id:s.customer_id||"",status:s.status||"",date:s.date||new Date().toISOString().split("T")[0],main_label:s.main_label||"",income_entries:s.income_entries||[{amount:"",label:""}]});y.useEffect(()=>{console.log("initialData:",s),s&&Object.keys(s).length>0&&a({customer_id:s.customer_id||"",status:s.status||"",date:s.date||new Date().toISOString().split("T")[0],main_label:s.main_label||"",income_entries:s.income_entries||[{amount:"",label:""}]})},[s]);const h=()=>{a("income_entries",[...r.income_entries,{amount:"",label:""}])},g=t=>{const n=[...r.income_entries];n.splice(t,1),a("income_entries",n)},c=(t,n)=>{const{name:d,value:j}=n.target,i=[...r.income_entries];i[t][d]=j,a("income_entries",i)},m=t=>{a(t.target.name,t.target.value)},p=t=>{t.preventDefault();const n={...r,income_entries:JSON.stringify(r.income_entries)};s.id?b(`/income/${s.id}`,{data:n,onSuccess:()=>{alert("Income entry updated successfully!"),l()},onError:()=>{alert("Failed to update income entry.")}}):x("/income",{data:n,onSuccess:()=>{alert("Income entry created successfully!"),l()},onError:()=>{alert("Failed to create income entry.")}})};return e.jsxs("div",{className:"w-[83.2%] absolute right-0 overflow-hidden",children:[e.jsx(N,{}),e.jsx(_,{}),e.jsxs("div",{className:"p-6 mx-auto bg-white rounded-md shadow-md ",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-700",children:s.id?"Edit Income Entry":"Create Income Entry"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:["Customer Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"customer_id",value:r.customer_id,onChange:m,className:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"--Select Customer--"}),u.map(t=>e.jsx("option",{value:t.id,children:t.name}))]}),o.customer_id&&e.jsx("span",{className:"text-sm text-red-500",children:o.customer_id})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"status",value:r.status,onChange:m,className:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"--Select Status--"}),e.jsx("option",{value:"0",children:"Paid"}),e.jsx("option",{value:"1",children:"Unpaid"})]}),o.status&&e.jsx("span",{className:"text-sm text-red-500",children:o.status})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"date",value:r.date,onChange:m,className:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),o.date&&e.jsx("span",{className:"text-sm text-red-500",children:o.date})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:["Main Label ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"main_label",value:r.main_label,onChange:m,className:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),o.main_label&&e.jsx("span",{className:"text-sm text-red-500",children:o.main_label})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"mb-2 text-sm font-semibold text-gray-700",children:"Income Entries"}),r.income_entries.map((t,n)=>e.jsxs("div",{className:"flex items-center mb-2 space-x-2",children:[e.jsx("input",{type:"number",name:"amount",placeholder:"Income Amount",value:t.amount,onChange:d=>c(n,d),className:"flex-1 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx("input",{type:"text",name:"label",placeholder:"Income Entry Label",value:t.label,onChange:d=>c(n,d),className:"flex-1 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx("button",{type:"button",onClick:()=>g(n),className:"px-3 py-2 text-sm text-white bg-red-500 rounded-md hover:bg-red-600",children:"Delete"})]},n)),e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 text-sm text-white bg-blue-500 rounded-md hover:bg-blue-600",children:"Add More Field"})]}),e.jsx("button",{type:"submit",className:"w-[10rem] py-2 text-sm font-semibold text-white bg-green-500 rounded-md hover:bg-green-600",children:s.id?"Update Income Entry":"Create Income Entry"})]})]})]})}export{I as default};
