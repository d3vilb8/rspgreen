import{r as s,j as e}from"./app-OWEBvdtC.js";import{H as P,N as F,c as A}from"./Nav-CmIRCLvo.js";import{u as L}from"./index-BSDyYLbN.js";import"./iconBase-hI8KM4xB.js";import"./index-CGRCqaVb.js";import"./index-BSTxKt_a.js";import"./index-DA7AibOW.js";const T=({holiday:y,user:N,user_type:l,notif:b})=>{const[d,g]=s.useState(!1),[h,v]=s.useState(!1),[x,w]=s.useState(null),[u,C]=s.useState(""),[n,S]=s.useState(1),i=5,{data:r,setData:_,post:p,errors:a,reset:H}=L({name:"",start_date:"",end_date:""}),c=()=>{g(!1),v(!1),w(null),H()},o=t=>{_(t.target.name,t.target.value)},E=t=>{t.preventDefault(),d?p("/holi-store",r).then(()=>c()):h&&x&&p(`/holi-update/${x.id}`,r).then(()=>c())},[O,M]=s.useState([]);s.useEffect(()=>{Array.isArray(l)?M(l):console.error("Expected user_type to be an array:",l)},[l]);const j=y.filter(t=>t.name.toLowerCase().includes(u.toLowerCase())),D=Math.ceil(j.length/i),f=j.slice((n-1)*i,n*i);return e.jsxs("div",{className:"w-[85.2%] ml-[12rem]",children:[e.jsx(P,{user:N,notif:b}),e.jsx(F,{user_type:l}),e.jsxs("div",{className:"p-3 px-[12rem] table-section",children:[e.jsx("div",{className:"flex justify-between mb-4",children:e.jsx("input",{type:"text",placeholder:"Search Holiday...",className:"p-2 border rounded-md",value:u,onChange:t=>C(t.target.value)})}),e.jsxs("table",{className:"table w-full",children:[e.jsx("thead",{className:"bg-[#013F6D] text-white",children:e.jsxs("tr",{className:"p-3",children:[e.jsx("th",{className:"p-3 text-left border",children:"Holiday Name"}),e.jsx("th",{className:"p-3 text-left border",children:"Name"})]})}),e.jsx("tbody",{children:f.length>0?f.map((t,m)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 border",children:t.name}),e.jsx("td",{className:"p-3 border",children:t.uname})]},m)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"py-4 text-center",children:"No holidays found"})})})]}),e.jsx("div",{className:"flex justify-between mt-4",children:e.jsx("div",{className:"flex items-center space-x-2",children:Array.from({length:D},(t,m)=>m+1).map(t=>e.jsx("button",{onClick:()=>S(t),className:`px-4 py-2 rounded ${n===t?"bg-blue-500 text-white":"bg-gray-200"}`,children:t},t))})})]}),(d||h)&&e.jsx("div",{className:"fixed top-0 left-0 z-50 flex items-center justify-center w-full h-screen bg-gray-900 bg-opacity-20",children:e.jsxs("div",{className:"p-10 w-full max-w-[500px] bg-white rounded-md shadow-md relative",children:[e.jsx("div",{className:"flex justify-end absolute top-0 right-[2rem]",children:e.jsx("button",{onClick:c,className:" p-2 rounded-md text-black w-[20%]",children:e.jsx(A,{})})}),e.jsxs("form",{onSubmit:E,className:"grid",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type_name",children:"Holiday Name"}),e.jsx("input",{id:"type_name",className:"w-full rounded-lg",name:"name",type:"text",value:r.name,onChange:o,required:!0}),a.type_name&&e.jsx("div",{children:a.type_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type_name",children:"Start Date"}),e.jsx("input",{id:"type_name",className:"w-full rounded-lg",name:"start_date",type:"date",value:r.start_date,onChange:o,required:!0}),a.type_name&&e.jsx("div",{children:a.type_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"days",children:"End Date"}),e.jsx("input",{className:"w-full rounded-lg",name:"end_date",type:"date",value:r.end_date,onChange:o,required:!0}),a.days&&e.jsx("div",{children:a.days})]}),e.jsx("div",{className:"flex justify-center p-3",children:e.jsx("button",{className:"p-2 bg-blue-500 rounded-md text-white w-[60%] mt-[2rem]",type:"submit",children:d?"Add Holiday":"Update Holiday"})})]})]})})]})};export{T as default};
