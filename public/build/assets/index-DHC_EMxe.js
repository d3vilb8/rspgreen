import{r as n,W as E,b as i,j as s}from"./app-DecQ0f_S.js";import{H as O,N as P}from"./Nav-BWBa_EZw.js";import{M}from"./Modal-BhgbF3q9.js";import{N as D}from"./notyf.min-DLu_xjpT.js";import"./iconBase-DWhxbjqT.js";import"./index-BPKSu1J7.js";import"./index-c1-G4gL8.js";import"./transition-CWN7uk3v.js";const G=({user:h,notif:b,user_type:g,products:y,category:f,tax:A})=>{const[j,d]=n.useState(!1),[o,m]=n.useState(null),[I,N]=n.useState([]),[T,v]=n.useState([]),a=new D,{data:r,setData:l,post:u,put:U,reset:w,errors:p}=E({name:"",category_id:"",purchase_price:"",unit_id:"",description:"",image:null,sku:""});n.useEffect(()=>{C(),_()},[]);const C=async()=>{try{const e=await i.get("/api/taxes");N(e.data)}catch(e){console.error("Error fetching tax options:",e)}},_=async()=>{try{const e=await i.get("/api/units");v(e.data)}catch(e){console.error("Error fetching unit options:",e)}},x=(e=null)=>{d(!0),l({name:e?e.name:"",category_id:e?e.category_id:"",purchase_price:e?e.purchase_price:"",unit_id:e?e.unit_id:"",description:e?e.description:"",image:null,sku:e?e.sku:""}),m(e?e.id:null)},c=()=>{d(!1),m(null),w()},S=e=>{e.preventDefault();const t=new FormData;t.append("name",r.name),t.append("category_id",r.category_id),t.append("purchase_price",r.purchase_price),t.append("unit_id",r.unit_id),t.append("description",r.description),t.append("sku",r.sku),r.image&&t.append("image",r.image),o?u(`/product-services/${o}`,{data:t,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{a.success("Product updated successfully!"),window.location.reload(),c()},onError:()=>{a.error("An error occurred while updating the product.")}}):u("/product-services",{data:t,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{a.success("Product created successfully!"),window.location.reload(),c()},onError:()=>{a.error("An error occurred while creating the product.")}})},k=async e=>{if(confirm("Are you sure you want to delete this product?"))try{await i.delete(`/product-services/${e}`),a.success("Product deleted successfully!"),window.location.reload()}catch(t){console.error("Error deleting product:",t),a.error("Product deleted successfully!"),window.location.reload()}};return s.jsxs("div",{className:"w-[83.2%] ml-[11.5rem] absolute right-0",children:[s.jsx(O,{user:h,notif:b}),s.jsx(P,{user_type:g}),s.jsx("div",{className:"flex px-9",children:s.jsxs("div",{className:"flex-1 p-6 ",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"Manage Services"}),s.jsx("button",{onClick:()=>x(),className:"p-2 text-teal-900 underline rounded-md",children:"Create Services"})]}),s.jsx("div",{className:"mt-3",children:s.jsxs("table",{className:"min-w-full border border-gray-300",children:[s.jsx("thead",{className:"bg-gray-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Services Name"}),s.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Services Category"}),s.jsx("th",{className:"px-4 py-2 text-right border-b",children:"Action"})]})}),s.jsx("tbody",{children:y.map(e=>s.jsxs("tr",{className:"transition duration-200 hover:bg-gray-100",children:[s.jsx("td",{className:"px-4 py-2 border-b",children:e.name}),s.jsx("td",{className:"px-4 py-2 border-b",children:e.cname}),s.jsxs("td",{className:"px-4 py-2 text-right border-b",children:[s.jsx("button",{onClick:()=>x(e),className:"text-blue-600 underline hover:text-blue-800",children:"Edit"}),s.jsx("button",{onClick:()=>k(e.id),className:"ml-4 text-red-600 underline hover:text-red-800",children:"Delete"})]})]},e.id))})]})})]})}),s.jsx(M,{show:j,onClose:c,children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-lg font-bold",children:o?"Edit Services":"Create New Services"}),p.name&&s.jsx("p",{className:"text-red-600",children:p.name}),s.jsxs("form",{onSubmit:S,className:"mt-4",children:[s.jsxs("label",{className:"block mb-2",children:["Name:",s.jsx("input",{type:"text",value:r.name,onChange:e=>l("name",e.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),s.jsxs("label",{className:"block mb-2",children:["Category :",s.jsxs("select",{value:r.category_id,onChange:e=>l("category_id",e.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0,children:[s.jsx("option",{value:"",children:"Select Category"}),f.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsxs("label",{className:"block mb-2",children:["Image:",s.jsx("input",{type:"file",onChange:e=>l("image",e.target.files[0]),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{type:"submit",className:"p-2 mt-4 text-white bg-blue-600 rounded-md",children:o?"Update ":"Save"}),s.jsx("button",{onClick:c,type:"button",className:"p-2 mt-4 text-white bg-red-600 rounded-md",children:"Close"})]})]})]})})]})};export{G as default};
