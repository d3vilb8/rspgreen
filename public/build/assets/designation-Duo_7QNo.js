import{r as o,W as v,j as e}from"./app-DecQ0f_S.js";import B from"./sidebar-Be9qf3jp.js";import{H as C,N as D}from"./Nav-BWBa_EZw.js";import{M as E}from"./Modal-BhgbF3q9.js";import{N as _}from"./notyf.min-DLu_xjpT.js";import"./iconBase-DWhxbjqT.js";import"./index-BPKSu1J7.js";import"./index-c1-G4gL8.js";import"./transition-CWN7uk3v.js";const R=({user:u,notif:x,user_type:p,designations:b})=>{const[g,l]=o.useState(!1),[r,d]=o.useState(null),t=new _,{data:j,setData:c,post:i,put:M,reset:f,errors:m}=v({ds_name:""});o.useEffect(()=>{n()},[]);const n=async()=>{try{const s=await axios.get("/designations");setBranches(s.data)}catch(s){console.error("Error fetching branches:",s)}},h=(s=null)=>{l(!0),c("ds_name",s?s.ds_name:""),d(s?s.id:null)},a=()=>{l(!1),d(null),f("ds_name")},N=s=>{s.preventDefault(),r?i(`/designations-up/${r}`,{onSuccess:()=>{t.success("Branch updated successfully!"),n(),a()},onError:()=>{t.error("An error occurred while updating the branch.")}}):i("/designations",{onSuccess:()=>{t.success("Branch created successfully!"),n(),a()},onError:()=>{t.error("An error occurred while creating the branch.")}})},y=async s=>{if(confirm("Are you sure you want to delete this branch?"))try{await axios.delete(`/designations/${s}`),t.success("Branch deleted successfully!"),window.location.reload()}catch(w){console.error("Error deleting branch:",w),t.error("Designation deleted successfully!"),window.location.reload()}};return e.jsxs("div",{className:"w-[85.2%] absolute right-0",children:[e.jsx(C,{user:u,notif:x}),e.jsx(D,{user_type:p}),e.jsxs("div",{className:"flex px-9",children:[e.jsx(B,{}),e.jsxs("div",{className:"flex-1 p-6 bg-gray-100",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"Manage designations"}),e.jsx("button",{onClick:()=>h(),className:"p-2 text-teal-900 underline rounded-md",children:"Create designations"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left border-b",children:"designations Name"}),e.jsx("th",{className:"px-4 py-2 text-right border-b",children:"Action"})]})}),e.jsx("tbody",{className:"",children:b.map(s=>e.jsxs("tr",{className:"transition duration-200 hover:bg-gray-100",children:[e.jsx("td",{className:"px-4 py-2 border-b",children:s.name}),e.jsxs("td",{className:"px-4 py-2 text-right border-b",children:[e.jsx("button",{onClick:()=>h(s),className:"text-blue-600 underline hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>y(s.id),className:"ml-4 text-red-600 underline hover:text-red-800",children:"Delete"})]})]},s.id))})]})})]})]}),e.jsx(E,{show:g,onClose:a,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold",children:r?"Edit Designation":"Create New Designation"}),m.ds_name&&e.jsx("p",{className:"text-red-600",children:m.ds_name}),e.jsxs("form",{onSubmit:N,className:"mt-4",children:[e.jsxs("label",{className:"block mb-2",children:["Designation Name:",e.jsx("input",{type:"text",value:j.ds_name,onChange:s=>c("ds_name",s.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),e.jsx("button",{type:"submit",className:"p-2 mt-4 text-white bg-blue-600 rounded-md",children:r?"Update Branch":"Create Branch"}),e.jsx("button",{onClick:a,type:"button",className:"p-2 mt-2 text-white bg-red-600 rounded-md",children:"Close"})]})]})})]})};export{R as default};
