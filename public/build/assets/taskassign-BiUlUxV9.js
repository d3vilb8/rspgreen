import{r as c,j as s,a as n,b}from"./app-OWEBvdtC.js";import{H as f,N as S}from"./Nav-CmIRCLvo.js";import"./index-BSDyYLbN.js";import{N as v}from"./notyf.min-DLu_xjpT.js";import"./iconBase-hI8KM4xB.js";import"./index-CGRCqaVb.js";import"./index-BSTxKt_a.js";import"./index-DA7AibOW.js";const o=new v,F=({user:i,projects:x,user_type:a,notif:h,status:u})=>{const[m,j]=c.useState({}),[r,p]=c.useState([]),N=(e,t)=>{const d=e.target.value;j(l=>({...l,[t]:d})),b.post(`/project-task-status/${t}`,{status:d}).then(l=>{console.log("Success:",l),o.success("Status updated successfully")}).catch(l=>{console.error("Error:",l),o.error("Failed to update status")})};return c.useEffect(()=>{Array.isArray(a)?p(a):console.error("Expected user_type to be an array:",a)},[a]),s.jsxs("div",{className:"w-[85.2%] ml-[11.5rem]",children:[s.jsx(f,{user:i,notif:h}),s.jsx(S,{user_type:a}),s.jsxs("div",{className:"table-section  border-[#0A1B3F] py-3 px-[8rem] rounded-b-md",children:[s.jsx("div",{className:"flex justify-end ",children:s.jsx("div",{className:"flex",children:r.includes("edit_status")&&s.jsx("div",{className:"px-4",children:s.jsx(n,{href:"taskstatus",className:"flex space-x-2 underline",children:s.jsx("span",{className:"font-bold",children:"Create Status"})})})})}),s.jsxs("table",{className:"table w-full p-4 border",children:[s.jsx("thead",{className:"border bg-[#0A1B3F] text-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 text-left border",children:"Project Name"}),r.includes("view_assign")&&s.jsx("th",{className:"p-3 text-left border",children:"Employee Name"}),s.jsx("th",{className:"p-3 text-left border",children:"Assign Task"}),s.jsx("th",{className:"p-3 text-left border",children:"Assign Hours"}),r.includes("edit_status")&&s.jsx("th",{className:"text-left border",children:"Status"})]})}),s.jsx("tbody",{children:x.map(e=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-3 border",children:s.jsx(n,{href:`/projects-show/${e.id}`,children:e.title})}),r.includes("view_assign")&&s.jsx("td",{className:"p-3 border",children:e.name}),s.jsx("td",{className:"p-3 border",children:e.task_name}),s.jsx("td",{className:"p-3 border",children:e.employee_hours}),r.includes("edit_status")&&s.jsx("td",{className:"p-3 border",children:s.jsxs("select",{className:"border-none appearance-none bg-transparent bg-[url('')]",value:m[e.id]||e.status,name:"status",onChange:t=>N(t,e.id),children:[s.jsx("option",{value:"",children:"Select Status"}),u.map(t=>s.jsx("option",{value:t.id,children:t.status_name}))]})})]},e.id))})]})]})]})};export{F as default};
