import{r,W as S,j as e,a as p}from"./app-OWEBvdtC.js";import{H as F,N as E}from"./Nav-CmIRCLvo.js";import{C as _}from"./index-Bt0IZRbn.js";import{R as D}from"./index-R_jZdsaO.js";import{N as A}from"./notyf.min-DLu_xjpT.js";import"./iconBase-hI8KM4xB.js";import"./index-CGRCqaVb.js";import"./index-BSTxKt_a.js";const P=new A;function I({user:u,user_type:j,notif:f,contracts:o}){const[a,N]=r.useState(""),[n,b]=r.useState(o),[d,i]=r.useState(1),[l]=r.useState(10),{delete:g}=S();r.useEffect(()=>{const t=o.filter(s=>s.contractor_name.toLowerCase().includes(a.toLowerCase()));b(t)},[a]);const x=d*l,m=x-l,h=n.slice(m,x),C=Math.ceil(n.length/l),y=Array.from({length:C},(t,s)=>s+1),w=t=>{N(t.target.value),i(1)},v=(t,s)=>{t.preventDefault(),confirm("are u sure u want to delete?")?g(`/contract/${s}`,{onSuccess:()=>{console.log("Form submitted successfully"),P.success("Contracts Deleted successfully"),window.location.reload()},onError:c=>{console.log("Form submission error",c)}}):console.log(" error fetching data")};return e.jsxs("div",{className:"w-[85.2%] absolute right-0 overflow-hidden",children:[e.jsx(F,{user:u,notif:f}),e.jsx(E,{user_type:j}),e.jsxs("div",{className:"table-section border-[#0A1B3F] py-3 px-8 rounded-b-md",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-[40%]",children:e.jsx("input",{type:"text",value:a,onChange:w,placeholder:"Search contracts...",className:"p-2 border rounded-md w-[80%]"})}),e.jsx("div",{className:"px-4",children:e.jsx(p,{href:"/contract/create",className:"flex space-x-2 underline",children:e.jsx("span",{className:"font-bold",children:"Create New Contract"})})})]}),e.jsx("br",{}),e.jsxs("table",{className:"table w-full p-4 border",children:[e.jsx("thead",{className:"border bg-[#0A1B3F] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left border",children:"#"}),e.jsx("th",{className:"p-3 text-left border",children:"Contractor Name"}),e.jsx("th",{className:"p-3 text-left border",children:"Contract Type"}),e.jsx("th",{className:"p-3 text-left border",children:"Contract Value"}),e.jsx("th",{className:"p-3 text-left border",children:"Start Date"}),e.jsx("th",{className:"p-3 text-left border",children:"End Date"}),e.jsx("th",{className:"p-3 text-left border",children:"Action"})]})}),e.jsx("tbody",{children:h.length>0?h.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 border",children:s+1+m}),e.jsx("td",{className:"p-3 border",children:t.contractor_name}),e.jsx("td",{className:"p-3 border",children:t.contractor_type}),e.jsx("td",{className:"p-3 border",children:t.contract_value}),e.jsx("td",{className:"p-3 border",children:t.start_date}),e.jsx("td",{className:"p-3 border",children:t.end_date}),e.jsx("td",{className:"border",children:e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx(p,{className:"text-green-800 text-[1.1rem] bg-[#0C7785] p-1 rounded-md",href:`/contract/${t.id}/edit`,children:e.jsx(_,{className:"text-white"})}),e.jsx("button",{className:"text-white text-[1.1rem] bg-[#FF3A6E] p-1 rounded-md",onClick:c=>v(c,t.id),children:e.jsx(D,{})})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-3 text-center",children:"No contracts found"})})})]}),e.jsx("div",{className:"flex justify-center mt-4",children:y.map(t=>e.jsx("button",{onClick:()=>i(t),className:`px-4 py-2 mx-1 rounded ${d===t?"bg-blue-500 text-white":"bg-gray-200"}`,children:t},t))})]})]})}export{I as default};
